
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>gvar - Gaussian Random Variables &#8212; gvar 12.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/pyramid.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="gvar.dataset - Random Data Sets" href="gvar_dataset.html" />
    <link rel="prev" title="Overview and Tutorial" href="overview.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="gvar_dataset.html" title="gvar.dataset - Random Data Sets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview and Tutorial"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">gvar 12.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar</span></code> - Gaussian Random Variables</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="gvar-gaussian-random-variables">
<h1><a class="reference internal" href="#module-gvar" title="gvar: Correlated Gaussian random variables."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar</span></code></a> - Gaussian Random Variables<a class="headerlink" href="#gvar-gaussian-random-variables" title="Permalink to this heading">¶</a></h1>
<span class="target" id="module-gvar"></span><section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>Objects of type <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> represent gaussian random variables,
which are specified by a mean and standard deviation. They are created
using <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a>: for example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">gvar</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>          <span class="c1"># 0 ± 3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">gvar</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>          <span class="c1"># 2 ± 4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>                    <span class="c1"># 2 ± 5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="go">22.0(5.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
<span class="go">22.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">sdev</span><span class="p">)</span>
<span class="go">5.0</span>
</pre></div>
</div>
<p>This module contains a variety of tools for creating and
manipulating gaussian random variables, including:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#gvar.mean" title="gvar.mean"><code class="xref any py py-func docutils literal notranslate"><span class="pre">mean</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — extract means.</p></li>
<li><p><a class="reference internal" href="#gvar.sdev" title="gvar.sdev"><code class="xref any py py-func docutils literal notranslate"><span class="pre">sdev</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — extract standard deviations.</p></li>
<li><p><a class="reference internal" href="#gvar.var" title="gvar.var"><code class="xref any py py-func docutils literal notranslate"><span class="pre">var</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — extract variances.</p></li>
<li><p><a class="reference internal" href="#gvar.is_primary" title="gvar.is_primary"><code class="xref any py py-func docutils literal notranslate"><span class="pre">is_primary</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — test whether primary (<code class="docutils literal notranslate"><span class="pre">True</span></code>) or derived (<code class="docutils literal notranslate"><span class="pre">False</span></code>) <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><a class="reference internal" href="#gvar.dependencies" title="gvar.dependencies"><code class="xref any py py-func docutils literal notranslate"><span class="pre">dependencies</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — collect primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s contributing to <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p></li>
<li><p><a class="reference internal" href="#gvar.filter" title="gvar.filter"><code class="xref any py py-func docutils literal notranslate"><span class="pre">filter</span></code></a><code class="docutils literal notranslate"><span class="pre">(g,</span> <span class="pre">f,</span> <span class="pre">*args,</span> <span class="pre">**kargs)</span></code> — filter <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> through function <code class="docutils literal notranslate"><span class="pre">f</span></code>.</p></li>
<li><p><a class="reference internal" href="#gvar.deriv" title="gvar.deriv"><code class="xref any py py-func docutils literal notranslate"><span class="pre">deriv</span></code></a><code class="docutils literal notranslate"><span class="pre">(g,</span> <span class="pre">x)</span></code> — derivatives of <code class="docutils literal notranslate"><span class="pre">g</span></code> with respect to <code class="docutils literal notranslate"><span class="pre">x</span></code>,</p></li>
<li><p><a class="reference internal" href="#gvar.fmt" title="gvar.fmt"><code class="xref any py py-func docutils literal notranslate"><span class="pre">fmt</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — replace all <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in array/dictionary by string representations.</p></li>
<li><p><a class="reference internal" href="#gvar.tabulate" title="gvar.tabulate"><code class="xref any py py-func docutils literal notranslate"><span class="pre">tabulate</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — tabulate entries in array/dictionary of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><a class="reference internal" href="#gvar.correlate" title="gvar.correlate"><code class="xref any py py-func docutils literal notranslate"><span class="pre">correlate</span></code></a><code class="docutils literal notranslate"><span class="pre">(g,</span> <span class="pre">corr)</span></code> — add correlations to <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in array/dictionary <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p></li>
<li><p><a class="reference internal" href="#gvar.chi2" title="gvar.chi2"><code class="xref any py py-func docutils literal notranslate"><span class="pre">chi2</span></code></a><code class="docutils literal notranslate"><span class="pre">(g1,</span> <span class="pre">g2)</span></code> — <code class="docutils literal notranslate"><span class="pre">chi**2</span></code> of <code class="docutils literal notranslate"><span class="pre">g1-g2</span></code>.</p></li>
<li><p><a class="reference internal" href="#gvar.qqplot" title="gvar.qqplot"><code class="xref any py py-func docutils literal notranslate"><span class="pre">qqplot</span></code></a><code class="docutils literal notranslate"><span class="pre">(g1,</span> <span class="pre">g2)</span></code> — QQ plot of <code class="docutils literal notranslate"><span class="pre">g1-g2</span></code>,</p></li>
<li><p><a class="reference internal" href="#gvar.equivalent" title="gvar.equivalent"><code class="xref any py py-func docutils literal notranslate"><span class="pre">equivalent</span></code></a><code class="docutils literal notranslate"><span class="pre">(g1,</span> <span class="pre">g2)</span></code> — <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s the same in <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code>?</p></li>
<li><p><a class="reference internal" href="#gvar.evalcov" title="gvar.evalcov"><code class="xref any py py-func docutils literal notranslate"><span class="pre">evalcov</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — compute covariance matrix.</p></li>
<li><p><a class="reference internal" href="#gvar.evalcov_blocks" title="gvar.evalcov_blocks"><code class="xref any py py-func docutils literal notranslate"><span class="pre">evalcov_blocks</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — compute diagonal blocks of covariance matrix.</p></li>
<li><p><a class="reference internal" href="#gvar.evalcorr" title="gvar.evalcorr"><code class="xref any py py-func docutils literal notranslate"><span class="pre">evalcorr</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — compute correlation matrix.</p></li>
<li><p><a class="reference internal" href="#gvar.fmt_values" title="gvar.fmt_values"><code class="xref any py py-func docutils literal notranslate"><span class="pre">fmt_values</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — list values for printing.</p></li>
<li><p><a class="reference internal" href="#gvar.fmt_errorbudget" title="gvar.fmt_errorbudget"><code class="xref any py py-func docutils literal notranslate"><span class="pre">fmt_errorbudget</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — create error-budget table for printing.</p></li>
<li><p><a class="reference internal" href="#gvar.fmt_chi2" title="gvar.fmt_chi2"><code class="xref any py py-func docutils literal notranslate"><span class="pre">fmt_chi2</span></code></a><code class="docutils literal notranslate"><span class="pre">(f)</span></code> — format chi**2 information in f as string for printing.</p></li>
<li><p>class <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferDict</span></code></a> — ordered dictionary with data buffer.</p></li>
<li><p>class <a class="reference internal" href="#gvar.PDF" title="gvar.PDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">PDF</span></code></a> — probability density function.</p></li>
<li><p>class <a class="reference internal" href="#gvar.PDFStatistics" title="gvar.PDFStatistics"><code class="xref py py-class docutils literal notranslate"><span class="pre">PDFStatistics</span></code></a> — statistical analysis of moments of a random variable.</p></li>
<li><p>class <a class="reference internal" href="#gvar.PDFHistogram" title="gvar.PDFHistogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">PDFHistogram</span></code></a> — tool for building PDF histograms.</p></li>
<li><p><a class="reference internal" href="#gvar.dump" title="gvar.dump"><code class="xref any py py-func docutils literal notranslate"><span class="pre">dump</span></code></a><code class="docutils literal notranslate"><span class="pre">(g,</span> <span class="pre">outputfile)</span></code> — serialize data from <code class="docutils literal notranslate"><span class="pre">g</span></code> in file.</p></li>
<li><p><a class="reference internal" href="#gvar.dumps" title="gvar.dumps"><code class="xref any py py-func docutils literal notranslate"><span class="pre">dumps</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — serialize data from <code class="docutils literal notranslate"><span class="pre">g</span></code> in a bytes object.</p></li>
<li><p><a class="reference internal" href="#gvar.load" title="gvar.load"><code class="xref any py py-func docutils literal notranslate"><span class="pre">load</span></code></a><code class="docutils literal notranslate"><span class="pre">(inputfile)</span></code> —  reconstitute data serialized in a file.</p></li>
<li><p><a class="reference internal" href="#gvar.loads" title="gvar.loads"><code class="xref any py py-func docutils literal notranslate"><span class="pre">loads</span></code></a><code class="docutils literal notranslate"><span class="pre">(inputbytes)</span></code> — reconstitute data serialized in a bytes object.</p></li>
<li><p><a class="reference internal" href="#gvar.gdump" title="gvar.gdump"><code class="xref any py py-func docutils literal notranslate"><span class="pre">gdump</span></code></a><code class="docutils literal notranslate"><span class="pre">(g,</span> <span class="pre">outputfile)</span></code> — serialize a collection of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in file.</p></li>
<li><p><a class="reference internal" href="#gvar.gdumps" title="gvar.gdumps"><code class="xref any py py-func docutils literal notranslate"><span class="pre">gdumps</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — serialize a collection of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in a string.</p></li>
<li><p><a class="reference internal" href="#gvar.gload" title="gvar.gload"><code class="xref any py py-func docutils literal notranslate"><span class="pre">gload</span></code></a><code class="docutils literal notranslate"><span class="pre">(inputfile)</span></code> — reconstitute a collection of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s from a file.</p></li>
<li><p><a class="reference internal" href="#gvar.gloads" title="gvar.gloads"><code class="xref any py py-func docutils literal notranslate"><span class="pre">gloads</span></code></a><code class="docutils literal notranslate"><span class="pre">(inputstr)</span></code> — reconstitute a collection of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s from a string.</p></li>
<li><p><a class="reference internal" href="#gvar.remove_gvars" title="gvar.remove_gvars"><code class="xref any py py-func docutils literal notranslate"><span class="pre">remove_gvars</span></code></a><code class="docutils literal notranslate"><span class="pre">(g,</span> <span class="pre">gvlist)</span></code> — remove <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s from <code class="docutils literal notranslate"><span class="pre">g</span></code>, appending them to <code class="docutils literal notranslate"><span class="pre">gvlist</span></code>.</p></li>
<li><p><a class="reference internal" href="#gvar.distribute_gvars" title="gvar.distribute_gvars"><code class="xref any py py-func docutils literal notranslate"><span class="pre">distribute_gvars</span></code></a><code class="docutils literal notranslate"><span class="pre">(g,</span> <span class="pre">gvlist)</span></code> — restore <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s to <code class="docutils literal notranslate"><span class="pre">g</span></code> from <code class="docutils literal notranslate"><span class="pre">gvlist</span></code>.</p></li>
<li><p>class <a class="reference internal" href="#gvar.GVarRef" title="gvar.GVarRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">GVarRef</span></code></a> — placeholder for <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> removed by <a class="reference internal" href="#gvar.remove_gvars" title="gvar.remove_gvars"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.remove_gvars()</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#gvar.disassemble" title="gvar.disassemble"><code class="xref any py py-func docutils literal notranslate"><span class="pre">disassemble</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code> — low-level routine to disassemble a collection of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><a class="reference internal" href="#gvar.reassemble" title="gvar.reassemble"><code class="xref any py py-func docutils literal notranslate"><span class="pre">reassemble</span></code></a><code class="docutils literal notranslate"><span class="pre">(data,cov)</span></code> — low-level routine to reassemble a collection of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><a class="reference internal" href="#gvar.raniter" title="gvar.raniter"><code class="xref any py py-func docutils literal notranslate"><span class="pre">raniter</span></code></a><code class="docutils literal notranslate"><span class="pre">(g,N)</span></code> — iterator for random numbers.</p></li>
<li><p><a class="reference internal" href="#gvar.ranseed" title="gvar.ranseed"><code class="xref any py py-func docutils literal notranslate"><span class="pre">ranseed</span></code></a><code class="docutils literal notranslate"><span class="pre">(seed)</span></code> — seed random number generator.</p></li>
<li><p><a class="reference internal" href="#gvar.sample" title="gvar.sample"><code class="xref any py py-func docutils literal notranslate"><span class="pre">sample</span></code></a><code class="docutils literal notranslate"><span class="pre">(g)</span></code>  — random sample from collection of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><a class="reference internal" href="#gvar.bootstrap_iter" title="gvar.bootstrap_iter"><code class="xref any py py-func docutils literal notranslate"><span class="pre">bootstrap_iter</span></code></a><code class="docutils literal notranslate"><span class="pre">(g,N)</span></code> — bootstrap iterator.</p></li>
<li><p><a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref any py py-func docutils literal notranslate"><span class="pre">regulate</span></code></a><code class="docutils literal notranslate"><span class="pre">(g,</span> <span class="pre">svdcut|eps)</span></code> — regulate correlation matrix.</p></li>
<li><p><a class="reference internal" href="#gvar.svd" title="gvar.svd"><code class="xref any py py-func docutils literal notranslate"><span class="pre">svd</span></code></a><code class="docutils literal notranslate"><span class="pre">(g,</span> <span class="pre">svdcut)</span></code> — SVD regulation of correlation matrix.</p></li>
<li><p><a class="reference internal" href="gvar_dataset.html#gvar.dataset.bin_data" title="gvar.dataset.bin_data"><code class="xref any py py-func docutils literal notranslate"><span class="pre">dataset.bin_data</span></code></a><code class="docutils literal notranslate"><span class="pre">(data)</span></code> — bin random sample data.</p></li>
<li><p><a class="reference internal" href="gvar_dataset.html#gvar.dataset.avg_data" title="gvar.dataset.avg_data"><code class="xref any py py-func docutils literal notranslate"><span class="pre">dataset.avg_data</span></code></a><code class="docutils literal notranslate"><span class="pre">(data)</span></code> — estimate means of random sample data.</p></li>
<li><p><a class="reference internal" href="gvar_dataset.html#gvar.dataset.bootstrap_iter" title="gvar.dataset.bootstrap_iter"><code class="xref any py py-func docutils literal notranslate"><span class="pre">dataset.bootstrap_iter</span></code></a><code class="docutils literal notranslate"><span class="pre">(data,N)</span></code> — bootstrap random sample data.</p></li>
<li><p>class <a class="reference internal" href="gvar_dataset.html#gvar.dataset.Dataset" title="gvar.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataset.Dataset</span></code></a> — class for collecting random sample data.</p></li>
</ul>
</div></blockquote>
</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this heading">¶</a></h2>
<p>The function used to create Gaussian variable objects is:</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.gvar">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">...</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.gvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates one or more new <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<p><code class="docutils literal notranslate"><span class="pre">gvar.gvar</span></code> is an object of type <code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVarFactory</span></code>.
Each of the following creates new <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s:</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xsdev</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Returns a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> with mean <code class="docutils literal notranslate"><span class="pre">x</span></code> and standard deviation <code class="docutils literal notranslate"><span class="pre">xsdev</span></code>.
Returns an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s if <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">xsdev</span></code> are arrays
with the same shape; the shape of the result is the same as the
shape of <code class="docutils literal notranslate"><span class="pre">x</span></code>. Returns a <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> if <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">xsdev</span></code>
are dictionaries with the same keys and layout; the result has
the same keys and layout as <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xcov</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Returns an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s with means given by array <code class="docutils literal notranslate"><span class="pre">x</span></code> and a
covariance matrix given by array <code class="docutils literal notranslate"><span class="pre">xcov</span></code>, where <code class="docutils literal notranslate"><span class="pre">xcov.shape</span> <span class="pre">=</span>
<span class="pre">2*x.shape</span></code>; the result has the same shape as <code class="docutils literal notranslate"><span class="pre">x</span></code>. Returns a
<a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> if <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">xcov</span></code> are dictionaries, where the
keys in <code class="docutils literal notranslate"><span class="pre">xcov</span></code> are <code class="docutils literal notranslate"><span class="pre">(k1,k2)</span></code> for any keys <code class="docutils literal notranslate"><span class="pre">k1</span></code> and <code class="docutils literal notranslate"><span class="pre">k2</span></code>
in <code class="docutils literal notranslate"><span class="pre">x</span></code>. Returns a single <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> if <code class="docutils literal notranslate"><span class="pre">x</span></code> is a number and
<code class="docutils literal notranslate"><span class="pre">xcov</span></code> is a one-by-one matrix. The layout for <code class="docutils literal notranslate"><span class="pre">xcov</span></code> is
compatible with that produced by <a class="reference internal" href="#gvar.evalcov" title="gvar.evalcov"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.evalcov()</span></code></a> for
a single <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary whose
values are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Therefore
<code class="docutils literal notranslate"><span class="pre">gvar.gvar(gvar.mean(g),</span> <span class="pre">gvar.evalcov(g))</span></code> creates <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
with the same means and covariance matrix as the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
in <code class="docutils literal notranslate"><span class="pre">g</span></code> provided <code class="docutils literal notranslate"><span class="pre">g</span></code> is a single <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, or an array or
dictionary of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xcov</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verify</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Same as <code class="docutils literal notranslate"><span class="pre">gvar.gvar(x,</span> <span class="pre">xcov)</span></code> above but checks that the covariance
matrix is symmetric and positive definite (which covariance matrices
should be). This check is expensive for large matrices and so is
<em>not</em> done by default. Note, however, that unpredictable outcomes
will result from specifying an improper covariance matrix.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xcov</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Normally <code class="docutils literal notranslate"><span class="pre">gvar.gvar(x,</span> <span class="pre">xcov)</span></code> tries to break the covariance matrix
into disjoint diagonal blocks, if there are any. For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xcov</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>
</pre></div>
</div>
<p>can be decomposed into two blocks. This decomposition saves memory,
and can make later manipulations of the resulting <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
faster. This is at the expense of extra processing to
create the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Setting keyword <code class="docutils literal notranslate"><span class="pre">fast=True</span></code> prevents
<code class="docutils literal notranslate"><span class="pre">gvar.gvar</span></code> from doing this, which would make sense, for example,
if it was known ahead of time that <code class="docutils literal notranslate"><span class="pre">xcov</span></code> has no sub-blocks. The
default is <code class="docutils literal notranslate"><span class="pre">fast=False</span></code>. Either choice gives correct answers;
the difference is about efficiency.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xsdev)</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Returns a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> with mean <code class="docutils literal notranslate"><span class="pre">x</span></code> and standard deviation <code class="docutils literal notranslate"><span class="pre">xsdev</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xstr</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Returns a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> corresponding to string <code class="docutils literal notranslate"><span class="pre">xstr</span></code> which is
either of the form <code class="docutils literal notranslate"><span class="pre">&quot;xmean</span> <span class="pre">±</span> <span class="pre">xsdev&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;x(xerr)&quot;</span></code>. Here
<code class="docutils literal notranslate"><span class="pre">±</span></code> can be replaced by <code class="docutils literal notranslate"><span class="pre">+/-</span></code> or <code class="docutils literal notranslate"><span class="pre">+-</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xgvar</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Returns <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> <code class="docutils literal notranslate"><span class="pre">xgvar</span></code> unchanged.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xdict</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Returns a dictionary (<a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferDict</span></code></a>) <code class="docutils literal notranslate"><span class="pre">b</span></code> where
<code class="docutils literal notranslate"><span class="pre">b[k]</span> <span class="pre">=</span> <span class="pre">gvar.gvar(xdict[k])</span></code> for every key in dictionary <code class="docutils literal notranslate"><span class="pre">xdict</span></code>.
The values in <code class="docutils literal notranslate"><span class="pre">xdict</span></code>, therefore, can be strings, tuples or
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s (see above), or arrays of these.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xarray</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Returns an array <code class="docutils literal notranslate"><span class="pre">a</span></code> having the same shape as <code class="docutils literal notranslate"><span class="pre">xarray</span></code> where
every element <code class="docutils literal notranslate"><span class="pre">a[i...]</span> <span class="pre">=</span> <span class="pre">gvar.gvar(xarray[i...])</span></code>. The values in
<code class="docutils literal notranslate"><span class="pre">xarray</span></code>, therefore, can be strings, tuples or <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s (see
above).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ymean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ycov</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xycov</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Returns a 1-d array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s <code class="docutils literal notranslate"><span class="pre">y[i]</span></code> constructed from the 1-d array
of mean values <code class="docutils literal notranslate"><span class="pre">ymean</span></code> and the 2-d covariance matrix <code class="docutils literal notranslate"><span class="pre">ycov</span></code>. The
<code class="docutils literal notranslate"><span class="pre">y[i]</span></code> are correlated with the primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in 1-d array <code class="docutils literal notranslate"><span class="pre">x</span></code>.
The <code class="docutils literal notranslate"><span class="pre">x-y</span></code> covariance matrix is <code class="docutils literal notranslate"><span class="pre">xycov</span></code> whose shape
is <code class="docutils literal notranslate"><span class="pre">x.shape</span> <span class="pre">+</span> <span class="pre">y.shape</span></code>. Note that this changes the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
in <code class="docutils literal notranslate"><span class="pre">x</span></code> (because they are correlated with the <code class="docutils literal notranslate"><span class="pre">y[i]</span></code>); it
has no effect on the variance or on correlations between
different <code class="docutils literal notranslate"><span class="pre">x[i]</span></code>s.</p>
</dd></dl>

</dd></dl>

<p>The following function is useful for constructing new functions that
can accept <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s as arguments:</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.gvar_function">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dfdx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.gvar_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> for function f(x) given f and df/dx at x.</p>
<p>This function creates a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> corresponding to a function of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s <code class="docutils literal notranslate"><span class="pre">x</span></code>
whose value is <code class="docutils literal notranslate"><span class="pre">f</span></code> and whose derivatives with respect to each
<code class="docutils literal notranslate"><span class="pre">x</span></code> are given by <code class="docutils literal notranslate"><span class="pre">dfdx</span></code>. Here <code class="docutils literal notranslate"><span class="pre">x</span></code> can be a single <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>,
an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s (for a multidimensional function), or
a dictionary whose values are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, while
<code class="docutils literal notranslate"><span class="pre">dfdx</span></code> must be a float, an array of floats, or a dictionary
whose values are floats or arrays of floats, respectively.</p>
<p>This function is useful for creating functions that can accept
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s as arguments. For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>

<span class="k">def</span> <span class="nf">sin</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">gv</span><span class="o">.</span><span class="n">GVar</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
        <span class="n">dfdx</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gv</span><span class="o">.</span><span class="n">gvar_function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">dfdx</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>creates a version of <code class="docutils literal notranslate"><span class="pre">sin(x)</span></code> that works with either floats or
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s as its argument. This particular function is unnecessary since
it is already provided by <a class="reference internal" href="#module-gvar" title="gvar: Correlated Gaussian random variables."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s) – Point at which the function is evaluated.</p></li>
<li><p><strong>f</strong> (<em>float</em>) – Value of function at point <code class="docutils literal notranslate"><span class="pre">gvar.mean(x)</span></code>.</p></li>
<li><p><strong>dfdx</strong> (<em>float</em><em>, </em><em>array of floats</em><em>, or </em><em>a dictionary of floats</em>) – Derivatives of function with respect to x at
point <code class="docutils literal notranslate"><span class="pre">gvar.mean(x)</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> representing the function’s value at <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd>
</dl>
</dd></dl>

<p>Means, standard deviations, variances, formatted strings, covariance
matrices and correlation/comparison information can be extracted from arrays
(or dictionaries) of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s using:</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.mean">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">mean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.mean" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract means from <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">g</span></code> can be a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary containing
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Result has the same layout as <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>Elements of <code class="docutils literal notranslate"><span class="pre">g</span></code> that are not <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are left unchanged.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.sdev">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">sdev</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.sdev" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract standard deviations from <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">g</span></code> can be a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary containing
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Result has the same layout as <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>The deviation is set to 0.0 for elements of <code class="docutils literal notranslate"><span class="pre">g</span></code> that are not <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.var">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">var</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.var" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute variances for elements of
array/dictionary <code class="docutils literal notranslate"><span class="pre">g</span></code> or a single <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">g</span></code> is an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, <code class="docutils literal notranslate"><span class="pre">var</span></code> returns the
variances as an array with shape <code class="docutils literal notranslate"><span class="pre">g.shape</span></code>.
If <code class="docutils literal notranslate"><span class="pre">g</span></code> is a dictionary whose values are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, the result is a dictionary where
<code class="docutils literal notranslate"><span class="pre">cov[k]</span></code> is the variance for <code class="docutils literal notranslate"><span class="pre">g[k]</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.is_primary">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">is_primary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.is_primary" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether or not the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> are primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<p>A <em>primary</em> <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> is one created using <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a> (or a
function of such a variable). A <em>derived</em> <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> is one that
is constructed from arithmetic expressions and functions that
combine multiple primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. The standard deviations for
all <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s originate with the primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.
In particular,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">mean</span> <span class="o">+</span> <span class="n">sum_p</span> <span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span> <span class="o">*</span> <span class="n">dz</span><span class="o">/</span><span class="n">dp</span>
</pre></div>
</div>
<p>is true for any <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> <code class="docutils literal notranslate"><span class="pre">z</span></code>, where the sum is over all primary
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s <code class="docutils literal notranslate"><span class="pre">p</span></code>.</p>
<p>Here <code class="docutils literal notranslate"><span class="pre">g</span></code> can be a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary containing
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. The result has the same layout as <code class="docutils literal notranslate"><span class="pre">g</span></code>.
Each <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> is replaced by <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> depending upon whether
it is primary or not.</p>
<p>When the same <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> appears more than once in <code class="docutils literal notranslate"><span class="pre">g</span></code>, only the first
appearance is marked as a primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>. This avoids double counting
the same primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> — each primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> in the list is unique.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.dependencies">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">dependencies</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.dependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s contributing to the covariances of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or a dictionary, array, etc. containing <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>all</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the result includes all primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s including
those that are in <code class="docutils literal notranslate"><span class="pre">g</span></code>; otherwise it only includes those not in <code class="docutils literal notranslate"><span class="pre">g</span></code>.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array containing the primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s contributing to covariances of
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.filter">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> through function <code class="docutils literal notranslate"><span class="pre">f</span></code>.</p>
<p>Sample usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">g_mod</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">gv</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
</pre></div>
</div>
<p>replaces every <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> in <code class="docutils literal notranslate"><span class="pre">g</span></code> by its mean. This is useful
when <code class="docutils literal notranslate"><span class="pre">gv.mean(g)</span></code> doesn’t work — for example, because
<code class="docutils literal notranslate"><span class="pre">g</span></code> contains data types other than <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s,
or consists of nested dictionaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – Object consisting of (possibly nested) dictionaries,
deques, lists, <code class="docutils literal notranslate"><span class="pre">numpy.array</span></code>s, tuples, and/or
other data types that contain <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and other
types of data.</p></li>
<li><p><strong>f</strong> – Function that takes an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s as an argument
and returns an array of results having the same shape.
Given an array <code class="docutils literal notranslate"><span class="pre">gvar_array</span></code> containing all
the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s from <code class="docutils literal notranslate"><span class="pre">g</span></code>, the function call is
<code class="docutils literal notranslate"><span class="pre">f(gvar_array,</span> <span class="pre">*args,</span> <span class="pre">**kargs)</span></code>. Results
from the returned array replace the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
in the original object.</p></li>
<li><p><strong>args</strong> – Additional arguments for <code class="docutils literal notranslate"><span class="pre">f</span></code>.</p></li>
<li><p><strong>kargs</strong> – Additional keyword arguments for <code class="docutils literal notranslate"><span class="pre">f</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An object like <code class="docutils literal notranslate"><span class="pre">g</span></code>  but with all the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
replaced by objects generated by function <code class="docutils literal notranslate"><span class="pre">f</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.fmt">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">fmt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndecimal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.fmt" title="Permalink to this definition">¶</a></dt>
<dd><p>Format <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">g</span></code> can be a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary containing
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Each <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> <code class="docutils literal notranslate"><span class="pre">gi</span></code> in <code class="docutils literal notranslate"><span class="pre">g</span></code> is replaced
by the string generated by <code class="docutils literal notranslate"><span class="pre">gi.fmt(format,ndecimal,sep)</span></code>. The
result has same structure as <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ndecimal</strong> (<em>int</em><em> or </em><em>None</em>) – Format each <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> using
<code class="docutils literal notranslate"><span class="pre">f'{self:.{ndecimal}f}'</span></code> when <code class="docutils literal notranslate"><span class="pre">ndecimal</span></code> is a
non-negative integer, or <code class="docutils literal notranslate"><span class="pre">f'{self:2P}'</span></code> when
<code class="docutils literal notranslate"><span class="pre">ndecimal</span></code> is negative. Ignored
if <code class="docutils literal notranslate"><span class="pre">ndecimal=None</span></code> (default).</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – String inserted between the <code class="docutils literal notranslate"><span class="pre">mean</span></code>
and the <code class="docutils literal notranslate"><span class="pre">(sdev)</span></code> in <code class="docutils literal notranslate"><span class="pre">'mean(sdev)'</span></code>. Default
is <code class="docutils literal notranslate"><span class="pre">sep=''</span></code>.</p></li>
<li><p><strong>format</strong> (<em>str</em>) – Format string used to convert each <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>. Ignored
if <code class="docutils literal notranslate"><span class="pre">ndecimal</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.tabulate">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">tabulate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndecimal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.tabulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Tabulate contents of an array or dictionary of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<p>Given an array <code class="docutils literal notranslate"><span class="pre">g</span></code> of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or a dictionary whose values are
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, <code class="docutils literal notranslate"><span class="pre">gvar.tabulate(g)</span></code> returns a
string containing a table of the values of <code class="docutils literal notranslate"><span class="pre">g</span></code>’s entries.
For example, the code</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span>
<span class="n">g</span><span class="p">[</span><span class="s1">&#39;scalar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="s1">&#39;10.3(1)&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="p">[</span><span class="s1">&#39;vector&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gvar</span><span class="p">([</span><span class="s1">&#39;0.52(3)&#39;</span><span class="p">,</span> <span class="s1">&#39;0.09(10)&#39;</span><span class="p">,</span> <span class="s1">&#39;1.2(1)&#39;</span><span class="p">])</span>
<span class="n">g</span><span class="p">[</span><span class="s1">&#39;tensor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gvar</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;0.01(50)&#39;</span><span class="p">,</span> <span class="s1">&#39;0.001(20)&#39;</span><span class="p">,</span> <span class="s1">&#39;0.033(15)&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;0.001(20)&#39;</span><span class="p">,</span> <span class="s1">&#39;2.00(5)&#39;</span><span class="p">,</span> <span class="s1">&#39;0.12(52)&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;0.007(45)&#39;</span><span class="p">,</span> <span class="s1">&#39;0.237(4)&#39;</span><span class="p">,</span> <span class="s1">&#39;10.23(75)&#39;</span><span class="p">],</span>
    <span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gv</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>prints the following table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="n">key</span><span class="o">/</span><span class="n">index</span>          <span class="n">value</span>     <span class="n">key</span><span class="o">/</span><span class="n">index</span>          <span class="n">value</span>
<span class="o">---------------------------</span>  <span class="o">---------------------------</span>
      <span class="n">scalar</span>     <span class="mf">10.30</span> <span class="p">(</span><span class="mi">10</span><span class="p">)</span>           <span class="mi">1</span><span class="p">,</span><span class="mi">0</span>     <span class="mf">0.001</span> <span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">vector</span> <span class="mi">0</span>     <span class="mf">0.520</span> <span class="p">(</span><span class="mi">30</span><span class="p">)</span>           <span class="mi">1</span><span class="p">,</span><span class="mi">1</span>     <span class="mf">2.000</span> <span class="p">(</span><span class="mi">50</span><span class="p">)</span>
           <span class="mi">1</span>      <span class="mf">0.09</span> <span class="p">(</span><span class="mi">10</span><span class="p">)</span>           <span class="mi">1</span><span class="p">,</span><span class="mi">2</span>      <span class="mf">0.12</span> <span class="p">(</span><span class="mi">52</span><span class="p">)</span>
           <span class="mi">2</span>      <span class="mf">1.20</span> <span class="p">(</span><span class="mi">10</span><span class="p">)</span>           <span class="mi">2</span><span class="p">,</span><span class="mi">0</span>     <span class="mf">0.007</span> <span class="p">(</span><span class="mi">45</span><span class="p">)</span>
  <span class="n">tensor</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>      <span class="mf">0.01</span> <span class="p">(</span><span class="mi">50</span><span class="p">)</span>           <span class="mi">2</span><span class="p">,</span><span class="mi">1</span>    <span class="mf">0.2370</span> <span class="p">(</span><span class="mi">40</span><span class="p">)</span>
         <span class="mi">0</span><span class="p">,</span><span class="mi">1</span>     <span class="mf">0.001</span> <span class="p">(</span><span class="mi">20</span><span class="p">)</span>           <span class="mi">2</span><span class="p">,</span><span class="mi">2</span>     <span class="mf">10.23</span> <span class="p">(</span><span class="mi">75</span><span class="p">)</span>
         <span class="mi">0</span><span class="p">,</span><span class="mi">2</span>     <span class="mf">0.033</span> <span class="p">(</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – Array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s (any shape) or dictionary whose values are
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s (any shape).</p></li>
<li><p><strong>ncol</strong> – The table is split over <code class="docutils literal notranslate"><span class="pre">ncol</span></code> columns of key/index values
plus <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> values. Default value is 1.</p></li>
<li><p><strong>headers</strong> – Prints standard header on table if <code class="docutils literal notranslate"><span class="pre">True</span></code>; omits the
header if <code class="docutils literal notranslate"><span class="pre">False</span></code>. If <code class="docutils literal notranslate"><span class="pre">headers</span></code> is a 2-tuple, then
<code class="docutils literal notranslate"><span class="pre">headers[0]</span></code> is used in the header over the indices/keys
and <code class="docutils literal notranslate"><span class="pre">headers[1]</span></code> over the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> values. (Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.)</p></li>
<li><p><strong>offset</strong> (<em>str</em>) – String inserted at the beginning of each line in
the table. Default is <code class="docutils literal notranslate"><span class="pre">''</span></code>.</p></li>
<li><p><strong>ndecimal</strong> – Number of digits displayed after the decimal point.
Default is <code class="docutils literal notranslate"><span class="pre">ndecimal=None</span></code> which adjusts table entries to
show 2 digits of error.</p></li>
<li><p><strong>keys</strong> – When <code class="docutils literal notranslate"><span class="pre">g</span></code> is a dictionary and <code class="docutils literal notranslate"><span class="pre">keys</span></code> is a list of
keys, entries will be tabulated only for keys in the <code class="docutils literal notranslate"><span class="pre">keys</span></code>
list; ignored if <code class="docutils literal notranslate"><span class="pre">keys=None</span></code> (default).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.correlate">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">correlate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verify</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.correlate" title="Permalink to this definition">¶</a></dt>
<dd><p>Add correlations to uncorrelated <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>This method creates correlated <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s from uncorrelated <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s <code class="docutils literal notranslate"><span class="pre">g</span></code>,
using the correlations specified in <code class="docutils literal notranslate"><span class="pre">corr</span></code>.</p>
<p>Note that correlations initially present in <code class="docutils literal notranslate"><span class="pre">g</span></code>, if any, are ignored.</p>
<p class="rubric">Examples</p>
<p>A typical application involves the construction of correlated
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s give the means and standard deviations, together with
a correlation matrix:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gvar</span><span class="p">([</span><span class="s1">&#39;1(1)&#39;</span><span class="p">,</span> <span class="s1">&#39;2(10)&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">gv</span><span class="o">.</span><span class="n">evalcorr</span><span class="p">(</span><span class="n">g</span><span class="p">))</span>           <span class="c1"># uncorrelated</span>
<span class="go">[[ 1.  0.]</span>
<span class="go"> [ 0.  1.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span>  <span class="n">gv</span><span class="o">.</span><span class="n">correlate</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="p">[[</span><span class="mf">1.</span> <span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">gv</span><span class="o">.</span><span class="n">evalcorr</span><span class="p">(</span><span class="n">g</span><span class="p">))</span>           <span class="c1"># correlated</span>
<span class="go">[[ 1.   0.1]</span>
<span class="go"> [ 0.1  1. ]]</span>
</pre></div>
</div>
<p>This also works when <code class="docutils literal notranslate"><span class="pre">g</span></code> and <code class="docutils literal notranslate"><span class="pre">corr</span></code> are dictionaries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s1">&#39;1(1)&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;2(10)&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">gv</span><span class="o">.</span><span class="n">evalcorr</span><span class="p">(</span><span class="n">g</span><span class="p">))</span>
<span class="go">{(&#39;a&#39;, &#39;a&#39;): array([[ 1.]]),(&#39;a&#39;, &#39;b&#39;): array([[ 0.]]),(&#39;b&#39;, &#39;a&#39;): array([[ 0.]]),(&#39;b&#39;, &#39;b&#39;): array([[ 1.]])}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">correlate</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">corr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">gv</span><span class="o">.</span><span class="n">evalcorr</span><span class="p">(</span><span class="n">g</span><span class="p">))</span>
<span class="go">{(&#39;a&#39;, &#39;a&#39;): array([[ 1.]]),(&#39;a&#39;, &#39;b&#39;): array([[ 0.1]]),(&#39;b&#39;, &#39;a&#39;): array([[ 0.1]]),(&#39;b&#39;, &#39;b&#39;): array([[ 1.]])}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – An array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or a dictionary whose values are
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>corr</strong> – Correlations between <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s: <code class="docutils literal notranslate"><span class="pre">corr[i,</span> <span class="pre">j]</span></code>
is the correlation between <code class="docutils literal notranslate"><span class="pre">g[i]</span></code> and <code class="docutils literal notranslate"><span class="pre">g[j]</span></code>. Should
be a symmetric and positive-definite (unless <code class="docutils literal notranslate"><span class="pre">upper</span></code>
or <code class="docutils literal notranslate"><span class="pre">lower</span></code> is specified).</p></li>
<li><p><strong>upper</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, replaces lower triangular part
of <code class="docutils literal notranslate"><span class="pre">corr</span></code> with transpose of the upper triangular part.
The diagonal is set to one. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>lower</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, replaces upper triangular part
of <code class="docutils literal notranslate"><span class="pre">corr</span></code> with transpose of the lower triangular part.
The diagonal is set to one. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>verify</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, verifies that <code class="docutils literal notranslate"><span class="pre">corr</span></code>
is symmetric and positive definite. Default is
<code class="docutils literal notranslate"><span class="pre">False</span></code> because verification is costly for large
matrices.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.evalcov">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">evalcov</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.evalcov" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute covariance matrix for elements of
array/dictionary <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">g</span></code> is an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, <code class="docutils literal notranslate"><span class="pre">evalcov</span></code> returns the
covariance matrix as an array with shape <code class="docutils literal notranslate"><span class="pre">g.shape+g.shape</span></code>.
If <code class="docutils literal notranslate"><span class="pre">g</span></code> is a dictionary whose values are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, the result is a doubly-indexed dictionary where
<code class="docutils literal notranslate"><span class="pre">cov[k1,k2]</span></code> is the covariance for <code class="docutils literal notranslate"><span class="pre">g[k1]</span></code> and <code class="docutils literal notranslate"><span class="pre">g[k2]</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.cov">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">cov</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.cov" title="Permalink to this definition">¶</a></dt>
<dd><p>Covariance of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> <code class="docutils literal notranslate"><span class="pre">g1</span></code> with <code class="docutils literal notranslate"><span class="pre">g2</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.evalcov_blocks">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">evalcov_blocks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.evalcov_blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate covariance matrix for elements of <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>Evaluates the covariance matrices for <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s stored in
array or dictionary of arrays/<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s <code class="docutils literal notranslate"><span class="pre">g</span></code>. The covariance matrix is
decomposed into its block diagonal components, and a list of
tuples <code class="docutils literal notranslate"><span class="pre">(idx,bcov)</span></code> is returned where <code class="docutils literal notranslate"><span class="pre">bcov</span></code> is a diagonal
block of the covariance matrix and <code class="docutils literal notranslate"><span class="pre">idx</span></code> an array containing the
corresponding indices in <code class="docutils literal notranslate"><span class="pre">g.flat</span></code> for that block. So to reassemble
the blocks into a single matrix <code class="docutils literal notranslate"><span class="pre">cov</span></code>, for example, one would use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">cov</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">flat</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">flat</span><span class="p">)),</span> <span class="nb">float</span><span class="p">)</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">bcov</span> <span class="ow">in</span> <span class="n">gv</span><span class="o">.</span><span class="n">evalcov_blocks</span><span class="p">(</span><span class="n">g</span><span class="p">):</span>
    <span class="n">cov</span><span class="p">[</span><span class="n">idx</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">bcov</span>
</pre></div>
</div>
<p><a class="reference internal" href="#gvar.evalcov_blocks" title="gvar.evalcov_blocks"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.evalcov_blocks()</span></code></a> is particularly useful when the covariance
matrix is sparse; only nonzero elements are retained.</p>
<p>Setting argument <code class="docutils literal notranslate"><span class="pre">compress=True</span></code> (default is <code class="docutils literal notranslate"><span class="pre">False</span></code>) changes
the meaning of the first element in the list: <code class="docutils literal notranslate"><span class="pre">idx</span></code> for the first
element contains the indices of all <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g.flat</span></code> that
are uncorrelated from other <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g.flat</span></code>, and <code class="docutils literal notranslate"><span class="pre">bcov</span></code>
contains the standard deviations for those <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Thus the full
covariance matrix is reconstructed using the following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">cov</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">flat</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">flat</span><span class="p">)),</span> <span class="nb">float</span><span class="p">)</span>
<span class="n">blocks</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">evalcov_blocks</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">compress</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># uncorrelated pieces are diagonal</span>
<span class="n">idx</span><span class="p">,</span> <span class="n">sdev</span> <span class="o">=</span> <span class="n">blocks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">cov</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">sdev</span> <span class="o">**</span> <span class="mi">2</span>
<span class="c1"># correlated pieces</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">bcov</span> <span class="ow">in</span> <span class="n">blocks</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="n">cov</span><span class="p">[</span><span class="n">idx</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">bcov</span>
</pre></div>
</div>
<p>The code with <code class="docutils literal notranslate"><span class="pre">compress=True</span></code> should be slightly faster if
there are many uncorrelated <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<p>It is easy to create an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s having the covariance
matrix from <code class="docutils literal notranslate"><span class="pre">g.flat</span></code>: for example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">new_g</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">flat</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">bcov</span> <span class="ow">in</span> <span class="n">evalcov_blocks</span><span class="p">(</span><span class="n">g</span><span class="p">):</span>
    <span class="n">new_g</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="n">new_g</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">bcov</span><span class="p">)</span>
</pre></div>
</div>
<p>creates an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s with zero mean and the same covariance
matrix as <code class="docutils literal notranslate"><span class="pre">g.flat</span></code>. This works with either value for argument <code class="docutils literal notranslate"><span class="pre">compress</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – A <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary whose values
are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>compress</strong> (<em>bool</em>) – Setting <code class="docutils literal notranslate"><span class="pre">compress=True</span></code> collects all of the
uncorrelated <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g.flat</span></code> into the first element of
the returned list (see above). Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.evalcorr">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">evalcorr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.evalcorr" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute correlation matrix for elements of
array/dictionary <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">g</span></code> is an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, <code class="docutils literal notranslate"><span class="pre">evalcorr</span></code> returns the
correlation matrix as an array with shape <code class="docutils literal notranslate"><span class="pre">g.shape+g.shape</span></code>.
If <code class="docutils literal notranslate"><span class="pre">g</span></code> is a dictionary whose values are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, the result is a doubly-indexed dictionary where
<code class="docutils literal notranslate"><span class="pre">corr[k1,k2]</span></code> is the correlation for <code class="docutils literal notranslate"><span class="pre">g[k1]</span></code> and <code class="docutils literal notranslate"><span class="pre">g[k2]</span></code>.</p>
<p>The correlation matrix is related to the covariance matrix by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">corr</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">cov</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">cov</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">j</span><span class="p">])</span> <span class="o">**</span> <span class="mf">0.5</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.corr">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">corr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.corr" title="Permalink to this definition">¶</a></dt>
<dd><p>Correlation between <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.uncorrelated">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">uncorrelated</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.uncorrelated" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g1</span></code> uncorrelated with those in <code class="docutils literal notranslate"><span class="pre">g2</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code> can be <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or dictionaries
containing <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if either
of <code class="docutils literal notranslate"><span class="pre">g1</span></code> or <code class="docutils literal notranslate"><span class="pre">g2</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.chi2">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">chi2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">svdcut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dof</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.chi2" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute chi**2 of <code class="docutils literal notranslate"><span class="pre">g1-g2</span></code>.</p>
<p>chi**2 equals <code class="docutils literal notranslate"><span class="pre">dg.invcov.dg,</span> <span class="pre">where</span> <span class="pre">``dg</span> <span class="pre">=</span> <span class="pre">g1</span> <span class="pre">-</span> <span class="pre">g2</span></code> and
<code class="docutils literal notranslate"><span class="pre">invcov</span></code> is the inverse of <code class="docutils literal notranslate"><span class="pre">dg</span></code>’s covariance matrix.
It is a measure  of how well multi-dimensional Gaussian
distributions <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code> (dictionaries or arrays)
agree with each other —  that is, do their means agree
within errors for corresponding elements. The probability
is high if <code class="docutils literal notranslate"><span class="pre">chi2(g1,g2)/dof</span></code> is of order 1 or smaller,
where <code class="docutils literal notranslate"><span class="pre">dof</span></code> is the number  of degrees of freedom
being compared.</p>
<p>Usually <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code> are dictionaries with the same keys,
where <code class="docutils literal notranslate"><span class="pre">g1[k]</span></code> and <code class="docutils literal notranslate"><span class="pre">g2[k]</span></code> are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s having the same shape. Alternatively <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code>
can be <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s having the same shape.</p>
<p>One of <code class="docutils literal notranslate"><span class="pre">g1</span></code> or <code class="docutils literal notranslate"><span class="pre">g2</span></code> can contain numbers instead of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s,
in which case <code class="docutils literal notranslate"><span class="pre">chi**2</span></code> is a measure of the likelihood that
the numbers came from the distribution specified by the other
argument.</p>
<p>One or the other of <code class="docutils literal notranslate"><span class="pre">g1</span></code> or <code class="docutils literal notranslate"><span class="pre">g2</span></code> can be missing keys, or missing
elements from arrays. Only the parts of <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code> that
overlap are used. Also setting <code class="docutils literal notranslate"><span class="pre">g2=None</span></code> is equivalent
to replacing its elements by zeros.</p>
<p>A typical application tests whether distribution <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code>
are consistent with each other (within errors): the code</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">chi2</span> <span class="o">=</span> <span class="n">gvar</span><span class="o">.</span><span class="n">chi2</span><span class="p">(</span><span class="n">g1</span><span class="p">,</span> <span class="n">g2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">gvar</span><span class="o">.</span><span class="n">fmt_chi2</span><span class="p">(</span><span class="n">chi2</span><span class="p">))</span>
<span class="go">chi2/dof = 1.1 [100]    Q = 0.26</span>
</pre></div>
</div>
<p>shows that the distributions are reasonably consistent. The
number of degrees of freedom (here 100) in this example equals the
number of variables from <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code> that are compared;
this can be changed using the <code class="docutils literal notranslate"><span class="pre">dof</span></code> argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g1</strong> – <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary whose values are
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Specifies a multi-dimensional
Gaussian distribution. Alternatively the elements can be
numbers instead of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, in which case <code class="docutils literal notranslate"><span class="pre">g1</span></code> specifies
a sample from a distribution.</p></li>
<li><p><strong>g2</strong> – <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary whose values are
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Specifies a multi-dimensional
Gaussian distribution. Alternatively the elements can be
numbers instead of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, in which case <code class="docutils literal notranslate"><span class="pre">g2</span></code> specifies
a sample from a distribution. Setting <code class="docutils literal notranslate"><span class="pre">g2=None</span></code>
(default) is equivalent to setting its elements all to zero.</p></li>
<li><p><strong>eps</strong> (<em>float</em>) – If positive, singularities in the correlation matrix
for <code class="docutils literal notranslate"><span class="pre">g1-g2</span></code> are regulated using <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a>
with cutoff <code class="docutils literal notranslate"><span class="pre">eps</span></code>. Ignored if <code class="docutils literal notranslate"><span class="pre">svdcut</span></code> is specified (and
not <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p></li>
<li><p><strong>svdcut</strong> (<em>float</em>) – If nonzero, singularities in the correlation
matrix for <code class="docutils literal notranslate"><span class="pre">g1-g2</span></code> are regulated using <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a>
with an SVD cutoff <code class="docutils literal notranslate"><span class="pre">svdcut</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">svdcut=1e-12</span></code>.</p></li>
<li><p><strong>dof</strong> (<em>int</em><em> or </em><em>None</em>) – Number of independent degrees of freedom in
<code class="docutils literal notranslate"><span class="pre">g1-g2</span></code>. This is set equal to the number of elements in
<code class="docutils literal notranslate"><span class="pre">g1-g2</span></code> if <code class="docutils literal notranslate"><span class="pre">dof=None</span></code> is set. This parameter affects
the <code class="docutils literal notranslate"><span class="pre">Q</span></code> value assigned to the <code class="docutils literal notranslate"><span class="pre">chi**2</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>The return value is the <code class="docutils literal notranslate"><span class="pre">chi**2</span></code>. Extra attributes attached
to this number give additional information:</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>dof</strong> — Number of degrees of freedom (that is, the number</dt><dd><p>of variables compared if not specified).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Q</strong> — The probability that the <code class="docutils literal notranslate"><span class="pre">chi**2</span></code> could have</dt><dd><p>been larger, by chance, even if <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code> agree. Values
smaller than 0.1 or so suggest that they do not agree.
Also called the <em>p-value</em>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>residuals</strong> — Decomposition of the <code class="docutils literal notranslate"><span class="pre">chi**2</span></code> in terms of the</dt><dd><p>independent modes of the correlation matrix: <code class="docutils literal notranslate"><span class="pre">chi**2</span> <span class="pre">=</span> <span class="pre">sum(residuals**2)</span></code>.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.qqplot">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">qqplot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">svdcut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dof</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.qqplot" title="Permalink to this definition">¶</a></dt>
<dd><p>QQ plot <code class="docutils literal notranslate"><span class="pre">g1-g2</span></code>.</p>
<p>The QQ plot compares the distribution of the means of Gaussian
distribution <code class="docutils literal notranslate"><span class="pre">g1-g2</span></code> to that of random samples from the
distribution. The resulting plot will approximate a straight
line along the diagonal of the plot (dashed black line) if
the means have a Gaussian distribution about zero with
the correct standard deviations.</p>
<p>Usually <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code> are dictionaries with the same keys,
where <code class="docutils literal notranslate"><span class="pre">g1[k]</span></code> and <code class="docutils literal notranslate"><span class="pre">g2[k]</span></code> are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s having the same shape. Alternatively <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code>
can be <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s having the same shape.</p>
<p>One of <code class="docutils literal notranslate"><span class="pre">g1</span></code> or <code class="docutils literal notranslate"><span class="pre">g2</span></code> can contain numbers instead of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<p>One or the other of <code class="docutils literal notranslate"><span class="pre">g1</span></code> or <code class="docutils literal notranslate"><span class="pre">g2</span></code> can be missing keys, or missing
elements from arrays. Only the parts of <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code> that
overlap are used. Also setting <code class="docutils literal notranslate"><span class="pre">g2=None</span></code> is equivalent
to replacing its elements by zeros.</p>
<p>In a typical application, the plot displayed by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gvar</span><span class="o">.</span><span class="n">qqplot</span><span class="p">(</span><span class="n">gsample</span><span class="p">,</span> <span class="n">g</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>tests whether <code class="docutils literal notranslate"><span class="pre">gsample</span></code> is likely a random sample
from a multi-dimensional Gaussian distribtuion <code class="docutils literal notranslate"><span class="pre">g</span></code>.
It is consistent with being a random sample if the
QQ plot is a straight line through the origin
with unit slope. The is most useful when there are
many variables (<code class="docutils literal notranslate"><span class="pre">g.size</span> <span class="pre">&gt;&gt;</span> <span class="pre">1</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g1</strong> – <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary whose values are
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Specifies a multi-dimensional
Gaussian distribution. Alternatively the elements can be
numbers instead of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, in which case <code class="docutils literal notranslate"><span class="pre">g1</span></code> specifies
a sample from a distribution.</p></li>
<li><p><strong>g2</strong> – <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary whose values are
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Specifies a multi-dimensional
Gaussian distribution. Alternatively the elements can be
numbers instead of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, in which case <code class="docutils literal notranslate"><span class="pre">g2</span></code> specifies
a sample from a distribution. Setting <code class="docutils literal notranslate"><span class="pre">g2=None</span></code>
(default) is equivalent to setting its elements all to zero.</p></li>
<li><p><strong>plot</strong> – a <code class="xref py py-mod docutils literal notranslate"><span class="pre">matplotlib</span></code> plotter. If <code class="docutils literal notranslate"><span class="pre">None</span></code> (default),
uses <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code>.</p></li>
<li><p><strong>eps</strong> (<em>float</em><em> or </em><em>None</em>) – <code class="docutils literal notranslate"><span class="pre">eps</span></code> used by <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a> when
inverting the covariance matrix. Ignored if <code class="docutils literal notranslate"><span class="pre">svdcut</span></code> is
set (and not <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p></li>
<li><p><strong>svdcut</strong> (<em>float</em>) – SVD cut used when inverting the covariance
matrix of <code class="docutils literal notranslate"><span class="pre">g1-g2</span></code>. See documentation for <a class="reference internal" href="#gvar.svd" title="gvar.svd"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.svd()</span></code></a>
for more information. Default is <code class="docutils literal notranslate"><span class="pre">svdcut=1e-12</span></code>.</p></li>
<li><p><strong>dof</strong> (<em>int</em><em> or </em><em>None</em>) – Number of independent degrees of freedom in
<code class="docutils literal notranslate"><span class="pre">g1-g2</span></code>. This is set equal to the number of elements in
<code class="docutils literal notranslate"><span class="pre">g1-g2</span></code> if <code class="docutils literal notranslate"><span class="pre">dof=None</span></code> is set. This parameter affects
the <code class="docutils literal notranslate"><span class="pre">Q</span></code> value assigned to the <code class="docutils literal notranslate"><span class="pre">chi**2</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Plotter <code class="docutils literal notranslate"><span class="pre">plot</span></code>.</p>
</dd>
</dl>
<p>This method requires the <code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy</span></code> and <code class="xref py py-mod docutils literal notranslate"><span class="pre">matplotlib</span></code> modules.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.fmt_chi2">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">fmt_chi2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.fmt_chi2" title="Permalink to this definition">¶</a></dt>
<dd><p>Return string containing <code class="docutils literal notranslate"><span class="pre">chi**2/dof</span></code>, <code class="docutils literal notranslate"><span class="pre">dof</span></code> and <code class="docutils literal notranslate"><span class="pre">Q</span></code> from <code class="docutils literal notranslate"><span class="pre">f</span></code>.</p>
<p>Assumes <code class="docutils literal notranslate"><span class="pre">f</span></code> has attributes <code class="docutils literal notranslate"><span class="pre">chi2</span></code>, <code class="docutils literal notranslate"><span class="pre">dof</span></code> and <code class="docutils literal notranslate"><span class="pre">Q</span></code>. The
logarithm of the Bayes factor will also be printed if <code class="docutils literal notranslate"><span class="pre">f</span></code> has
attribute <code class="docutils literal notranslate"><span class="pre">logGBF</span></code>.</p>
</dd></dl>

<p><a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are compared by:</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.equivalent">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">equivalent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rtol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">atol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.equivalent" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code> contain equivalent <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<p>Compares sums and differences of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s stored in <code class="docutils literal notranslate"><span class="pre">g1</span></code>
and <code class="docutils literal notranslate"><span class="pre">g2</span></code> to see if they agree within tolerances. Operationally,
agreement means that:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">abs</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">summ</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">rtol</span> <span class="o">+</span> <span class="n">atol</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">diff</span></code> and <code class="docutils literal notranslate"><span class="pre">summ</span></code> are the difference and sum of the
mean values (<code class="docutils literal notranslate"><span class="pre">g.mean</span></code>) or derivatives (<code class="docutils literal notranslate"><span class="pre">g.der</span></code>) associated with
each pair of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<p><a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s that are equivalent are effectively interchangeable with respect
to both their means and also their covariances with any other <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>
(including ones not in <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code> can be individual <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
or dictionaries whose values are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.
Comparisons are made only for shared keys when they are dictionaries.
Array dimensions must match between <code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code>, but the shapes
can be different; comparisons are made for the parts of the arrays that
overlap in shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g1</strong> – A <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or a dictionary of
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>g2</strong> – A <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or a dictionary of
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>rtol</strong> – Relative tolerance with which mean values and derivatives
must agree with each other. Default is <code class="docutils literal notranslate"><span class="pre">1e-10</span></code>.</p></li>
<li><p><strong>atol</strong> – Absolute tolerance within which mean values and derivatives
must agree with each other. Default is <code class="docutils literal notranslate"><span class="pre">1e-10</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p><a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s can be stored (serialized) and retrieved from files (or strings) using:</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.dump">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_dependencies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a representation of <code class="docutils literal notranslate"><span class="pre">g</span></code>  to file <code class="docutils literal notranslate"><span class="pre">outputfile</span></code>.</p>
<p>Object <code class="docutils literal notranslate"><span class="pre">g</span></code> consists of (possibly nested) dictionaries, deques,
lists, <code class="docutils literal notranslate"><span class="pre">numpy.array</span></code>s, and/or tuples that contain <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and
other types of data. Calling <code class="docutils literal notranslate"><span class="pre">gvar.dump(g,</span> <span class="pre">'filename')</span></code> writes a
serialized representation of <code class="docutils literal notranslate"><span class="pre">g</span></code> into the file named <code class="docutils literal notranslate"><span class="pre">filename</span></code>.
Object <code class="docutils literal notranslate"><span class="pre">g</span></code> can be recovered later using <code class="docutils literal notranslate"><span class="pre">gvar.load('filename')</span></code>.</p>
<p>Typical usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create file xxx.pickle containing GVars in g</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">gv</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;xxx.pickle&#39;</span><span class="p">)</span>

<span class="c1"># read file xxx.pickle to recreate g</span>
<span class="n">new_g</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;xxx.pickle&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="#gvar.dump" title="gvar.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dump()</span></code></a> is an alternative to <code class="docutils literal notranslate"><span class="pre">pickle.dump()</span></code> which,
unlike the latter, works when there are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.
In particular it preserves correlations between different
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, as well as relationships (i.e., derivatives) between
derived <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.
<a class="reference internal" href="#gvar.dump" title="gvar.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dump()</span></code></a> uses <a class="reference internal" href="#gvar.remove_gvars" title="gvar.remove_gvars"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.remove_gvars()</span></code></a> to search
(recursively) for the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>The partial variances for derived <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> coming from
primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> are preserved by <a class="reference internal" href="#gvar.dump" title="gvar.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dump()</span></code></a>.
(These are used, for example, to calculate error budgets.)
Partial variances coming from derived (rather than
primary) <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, however, are unreliable unless
every primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> that contributes to the covariances
in <code class="docutils literal notranslate"><span class="pre">g</span></code> is included in <code class="docutils literal notranslate"><span class="pre">g</span></code>. To guarantee that
this is the case, set keyword <code class="docutils literal notranslate"><span class="pre">add_dependencies=True</span></code>.
This can greatly increase the size of the output file,
and so should only be done if error budgets, etc. are needed.
(Also the cost of evaluating covariance matrices
for the reconstituted <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s is increased if there
are large numbers of primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.) The default is
<code class="docutils literal notranslate"><span class="pre">add_dependencies=False</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – Object to be serialized. Consists of (possibly nested)
dictionaries, deques, lists, <code class="docutils literal notranslate"><span class="pre">numpy.array</span></code>s,
and/or tuples that contain <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and other types of data.</p></li>
<li><p><strong>outputfile</strong> – The name of a file or a file object in which the
serialized <code class="docutils literal notranslate"><span class="pre">g</span></code> is stored. If <code class="docutils literal notranslate"><span class="pre">outputfile=None</span></code> (default),
the results are written to a <code class="xref py py-class docutils literal notranslate"><span class="pre">BytesIO</span></code>.</p></li>
<li><p><strong>add_dependencies</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, automatically includes
all primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s that contribute to the covariances
of the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> but are not already in <code class="docutils literal notranslate"><span class="pre">g</span></code>.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>kargs</strong> (<em>dict</em>) – Additional arguments, if any, that are passed to
the underlying serializer (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">BytesIO</span></code> object containing the serialized data,
if <code class="docutils literal notranslate"><span class="pre">outputfile=None</span></code>; otherwise <code class="docutils literal notranslate"><span class="pre">outputfile</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.dumps">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">dumps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_dependencies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a serialized representation of <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>This function is shorthand for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gvar</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
</pre></div>
</div>
<p>Typical usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create bytes object containing GVars in g</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">gbytes</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

<span class="c1"># convert bytes object back into g</span>
<span class="n">new_g</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">gbytes</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – Object to be serialized. Consists of (possibly nested)
dictionaries, deques, lists, <code class="docutils literal notranslate"><span class="pre">numpy.array</span></code>s,
and/or tuples that contain <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and other types of data.</p></li>
<li><p><strong>add_dependencies</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, automatically includes
all primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s that contribute to the covariances
of the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> but are not already in <code class="docutils literal notranslate"><span class="pre">g</span></code>.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>kargs</strong> (<em>dict</em>) – Additional arguments, if any, that are passed to
the underlying serializer (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A bytes object containing a serialized representation
of object <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.load">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputfile</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Read and return object serialized in <code class="docutils literal notranslate"><span class="pre">inputfile</span></code> by <a class="reference internal" href="#gvar.dump" title="gvar.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dump()</span></code></a>.</p>
<p>This function recovers data serialized with <a class="reference internal" href="#gvar.dump" title="gvar.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dump()</span></code></a>.
Typical usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create file xxx.pickle containing data in g</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">gv</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;xxx.pickle&#39;</span><span class="p">)</span>

<span class="c1"># read file xxx.pickle to recreate g</span>
<span class="n">new_g</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gload</span><span class="p">(</span><span class="s1">&#39;xxx.pickle&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the format used by <a class="reference internal" href="#gvar.dump" title="gvar.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dump()</span></code></a> changed with
version 11.0 of <a class="reference internal" href="#module-gvar" title="gvar: Correlated Gaussian random variables."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar</span></code></a>. <a class="reference internal" href="#gvar.load" title="gvar.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.load()</span></code></a> will
attempt to read the old formats if they are encountered, but
old data should be converted to the new format (by reading
it in with <a class="reference internal" href="#gvar.load" title="gvar.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load()</span></code></a> and them writing it out again
with <a class="reference internal" href="#gvar.dump" title="gvar.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">dump()</span></code></a>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputfile</strong> – The name of the file or a file object in which the
serialized <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are stored (created by <a class="reference internal" href="#gvar.dump" title="gvar.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dump()</span></code></a>).</p></li>
<li><p><strong>kargs</strong> (<em>dict</em>) – Additional arguments, if any, that are passed to
the underlying de-serializer (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The reconstructed data object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.loads">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">loads</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputbytes</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.loads" title="Permalink to this definition">¶</a></dt>
<dd><p>Read and return object serialized in <code class="docutils literal notranslate"><span class="pre">inputbytes</span></code> by <a class="reference internal" href="#gvar.dumps" title="gvar.dumps"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dumps()</span></code></a>.</p>
<p>This function recovers data serialized with <a class="reference internal" href="#gvar.dumps" title="gvar.dumps"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dumps()</span></code></a>. It is
shorthand for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gvar</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">inputbytes</span><span class="p">))</span>
</pre></div>
</div>
<p>Typical usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create bytes object containing data in g</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">gbytes</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

<span class="c1"># recreate g from bytes object gbytes</span>
<span class="n">new_g</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gloads</span><span class="p">(</span><span class="n">gbytes</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputbytes</strong> (<em>bytes</em>) – Bytes object created by <a class="reference internal" href="#gvar.dumps" title="gvar.dumps"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dumps()</span></code></a>.</p></li>
<li><p><strong>kargs</strong> (<em>dict</em>) – Additional arguments, if any, that are passed to
the underlying serializer (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The reconstructed data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.gdump">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gdump</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_dependencies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.gdump" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a representation of <code class="docutils literal notranslate"><span class="pre">g</span></code>  to file <code class="docutils literal notranslate"><span class="pre">outputfile</span></code>.</p>
<p>Object <code class="docutils literal notranslate"><span class="pre">g</span></code> is a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s (any shape), or
a dictionary whose values are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s;
it describes a general (multi-dimensional) Gaussian distribution.
Calling <code class="docutils literal notranslate"><span class="pre">gvar.gdump(g,</span> <span class="pre">'filename')</span></code> writes a serialized representation
of <code class="docutils literal notranslate"><span class="pre">g</span></code> into the file named <code class="docutils literal notranslate"><span class="pre">filename</span></code>. The Gaussian distribution
described by <code class="docutils literal notranslate"><span class="pre">g</span></code> can be recovered later using <code class="docutils literal notranslate"><span class="pre">gvar.load('filename')</span></code>.
Correlations between different <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> are preserved, as
are relationships (i.e., derivatives) between derived <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and
any primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p><a class="reference internal" href="#gvar.gdump" title="gvar.gdump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gdump()</span></code></a> differs from <a class="reference internal" href="#gvar.dump" title="gvar.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dump()</span></code></a> in that the elements
in <code class="docutils literal notranslate"><span class="pre">g</span></code> must all be <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s for the former, whereas <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s may be
mixed in with other data types for the latter. The structure of <code class="docutils literal notranslate"><span class="pre">g</span></code>
is also more restricted for <a class="reference internal" href="#gvar.gdump" title="gvar.gdump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gdump()</span></code></a>, but it is
typically faster than <a class="reference internal" href="#gvar.dump" title="gvar.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dump()</span></code></a>.</p>
<p>Typical usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create file xxx.pickle containing GVars in g</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">gv</span><span class="o">.</span><span class="n">gdump</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;xxx.pickle&#39;</span><span class="p">)</span>

<span class="c1"># read file xxx.pickle to recreate g</span>
<span class="n">new_g</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gload</span><span class="p">(</span><span class="s1">&#39;xxx.pickle&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Object <code class="docutils literal notranslate"><span class="pre">g</span></code> is serialized using one of the <code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code> (text
file) or <code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code> (binary file) Python modules.
Method <code class="docutils literal notranslate"><span class="pre">'json'</span></code> can produce smaller files, but
method <code class="docutils literal notranslate"><span class="pre">'pickle'</span></code> can be significantly faster. <code class="docutils literal notranslate"><span class="pre">'json'</span></code>
is more secure than <code class="docutils literal notranslate"><span class="pre">'pickle'</span></code>, if that is an issue.</p>
<p><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code> can have trouble with dictionaries whose keys are
not strings. A workaround is used here that succeeds provided
<code class="docutils literal notranslate"><span class="pre">eval(repr(k))</span> <span class="pre">==</span> <span class="pre">k</span></code> for every key <code class="docutils literal notranslate"><span class="pre">k</span></code>. This works for
a wide variety of standard key types including strings, integers,
and tuples of strings and/or integers. Try <code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code> if the
workaround fails.</p>
<p>The partial variances for derived <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> coming from
primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> are preserved by <a class="reference internal" href="#gvar.gdump" title="gvar.gdump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gdump()</span></code></a>.
(These are used, for example, to calculate error budgets.)
Partial variances coming from derived (rather than
primary) <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, however, are unreliable unless
every primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> that contributes to the covariances
in <code class="docutils literal notranslate"><span class="pre">g</span></code> is included in <code class="docutils literal notranslate"><span class="pre">g</span></code>. To guarantee that
this is the case set keyword <code class="docutils literal notranslate"><span class="pre">add_dependencies=True</span></code>.
This can greatly increase the size of the output file,
and so should only be done if error budgets, etc. are needed.
(Also the cost of evaluating covariance matrices
for the reconstituted <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s is increased if there
are large numbers of primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.) The default is
<code class="docutils literal notranslate"><span class="pre">add_dependencies=False</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – A <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or dictionary whose values
are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>outputfile</strong> – The name of a file or a file object in which the
serialized <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are stored. If <code class="docutils literal notranslate"><span class="pre">outputfile=None</span></code> (default),
the results are written to a <code class="xref py py-class docutils literal notranslate"><span class="pre">StringIO</span></code> (for
<code class="docutils literal notranslate"><span class="pre">method='json'</span></code>) or <code class="xref py py-class docutils literal notranslate"><span class="pre">BytesIO</span></code> (for
<code class="docutils literal notranslate"><span class="pre">method='pickle'</span></code>) object.</p></li>
<li><p><strong>method</strong> (<em>str</em>) – Serialization method, which should be either
<code class="docutils literal notranslate"><span class="pre">'json'</span></code> or <code class="docutils literal notranslate"><span class="pre">'pickle'</span></code>. If <code class="docutils literal notranslate"><span class="pre">method=None</span></code> (default),
the method is inferred from the filename’s extension:
<code class="docutils literal notranslate"><span class="pre">.json</span></code> for <code class="docutils literal notranslate"><span class="pre">'json'</span></code>; and <code class="docutils literal notranslate"><span class="pre">.pickle</span></code> or <code class="docutils literal notranslate"><span class="pre">.pkl</span></code>
or <code class="docutils literal notranslate"><span class="pre">.p</span></code> for <code class="docutils literal notranslate"><span class="pre">'pickle'</span></code>. If that fails the method
defaults to <code class="docutils literal notranslate"><span class="pre">'json'</span></code>.</p></li>
<li><p><strong>add_dependencies</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, automatically includes
all primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s that contribute to the covariances
of the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> but are not already in <code class="docutils literal notranslate"><span class="pre">g</span></code>.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>kargs</strong> (<em>dict</em>) – Additional arguments, if any, that are passed to
the underlying serializer (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code> or <code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>if <code class="docutils literal notranslate"><span class="pre">outputfile=None</span></code>, the <code class="xref py py-class docutils literal notranslate"><span class="pre">StringIO</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">BytesIO</span></code>
object containing the serialized data is returned. Otherwise
<code class="docutils literal notranslate"><span class="pre">outputfile</span></code> is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.gdumps">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gdumps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_dependencies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.gdumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a serialized representation of <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>This function is shorthand for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gvar</span><span class="o">.</span><span class="n">gdump</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
</pre></div>
</div>
<p>Typical usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create string containing GVars in g</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">gstr</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gdumps</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

<span class="c1"># convert string back into GVars</span>
<span class="n">new_g</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gloads</span><span class="p">(</span><span class="n">gstr</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – A <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or dictionary whose values
are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>method</strong> – Serialization method, which should be either
<code class="docutils literal notranslate"><span class="pre">'json'</span></code> or <code class="docutils literal notranslate"><span class="pre">'pickle'</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">'json'</span></code>.</p></li>
<li><p><strong>add_dependencies</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, automatically includes
all primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s that contribute to the covariances
of the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> but are not already in <code class="docutils literal notranslate"><span class="pre">g</span></code>.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A string or bytes object containing a serialized
representation of object <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.gload">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.gload" title="Permalink to this definition">¶</a></dt>
<dd><p>Read and return <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s that are serialized in <code class="docutils literal notranslate"><span class="pre">inputfile</span></code>.</p>
<p>This function recovers <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s serialized with <a class="reference internal" href="#gvar.gdump" title="gvar.gdump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gdump()</span></code></a>.
Typical usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create file xxx.pickle containing GVars in g</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">gv</span><span class="o">.</span><span class="n">gdump</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;xxx.pickle&#39;</span><span class="p">)</span>

<span class="c1"># read file xxx.pickle to recreate g</span>
<span class="n">new_g</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gload</span><span class="p">(</span><span class="s1">&#39;xxx.pickle&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputfile</strong> – The name of the file or a file object in which the
serialized <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are stored (created by <a class="reference internal" href="#gvar.gdump" title="gvar.gdump"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gdump()</span></code></a>).</p></li>
<li><p><strong>method</strong> (<em>str</em><em> or </em><em>None</em>) – Serialization method, which should be either
<code class="docutils literal notranslate"><span class="pre">'pickle'</span></code> or <code class="docutils literal notranslate"><span class="pre">'json'</span></code>. If <code class="docutils literal notranslate"><span class="pre">method=None</span></code> (default),
the method is inferred from the filename’s extension:
<code class="docutils literal notranslate"><span class="pre">.json</span></code> for <code class="docutils literal notranslate"><span class="pre">'json'</span></code>; and <code class="docutils literal notranslate"><span class="pre">.pickle</span></code> or <code class="docutils literal notranslate"><span class="pre">.pkl</span></code>
or <code class="docutils literal notranslate"><span class="pre">.p</span></code> for <code class="docutils literal notranslate"><span class="pre">'pickle'</span></code>. If that fails the method
defaults to <code class="docutils literal notranslate"><span class="pre">'json'</span></code>. Argument <code class="docutils literal notranslate"><span class="pre">method</span></code> is ignored
if <code class="docutils literal notranslate"><span class="pre">inputfile</span></code> is either a <code class="xref py py-class docutils literal notranslate"><span class="pre">StringIO</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">BytesIO</span></code> object, with the method being set
to <code class="docutils literal notranslate"><span class="pre">'json'</span></code> or <code class="docutils literal notranslate"><span class="pre">'pickle'</span></code>, respectively.</p></li>
<li><p><strong>kargs</strong> (<em>dict</em>) – Additional arguments, if any, that are passed to
the underlying de-serializer (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code> or <code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The reconstructed <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or dictionary
whose values are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.gloads">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gloads</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputstring</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.gloads" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s that are serialized in <code class="docutils literal notranslate"><span class="pre">inputstr</span></code>.</p>
<p>This function recovers the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s serialized with <code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gdumps(g)()</span></code>.
It is shorthand for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gvar</span><span class="o">.</span><span class="n">gload</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">inputstr</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Typical usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create string containing GVars in g</span>
<span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">gstr</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gdumps</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

<span class="c1"># convert string back into GVars</span>
<span class="n">new_g</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gloads</span><span class="p">(</span><span class="n">gstr</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>inputstr</strong> (<em>str</em><em> or </em><em>bytes</em>) – String or bytes object
created by <a class="reference internal" href="#gvar.dumps" title="gvar.dumps"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.dumps()</span></code></a>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The reconstructed <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or dictionary
whose values are <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.remove_gvars">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">remove_gvars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gvlist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.remove_gvars" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s from structure g, replacing them with <a class="reference internal" href="#gvar.GVarRef" title="gvar.GVarRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVarRef</span></code></a>s and collecting them in <code class="docutils literal notranslate"><span class="pre">gvlist</span></code>.</p>
<p><a class="reference internal" href="#gvar.remove_gvars" title="gvar.remove_gvars"><code class="xref py py-func docutils literal notranslate"><span class="pre">remove_gvars()</span></code></a> searches object <code class="docutils literal notranslate"><span class="pre">g</span></code> (recursively)
for <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and replaces them with <a class="reference internal" href="#gvar.GVarRef" title="gvar.GVarRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">GVarRef</span></code></a> objects.
The <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are collected in list <code class="docutils literal notranslate"><span class="pre">gvlist</span></code>. <code class="docutils literal notranslate"><span class="pre">g</span></code> can
be a standard container object (dictionary, list, etc.) or an
object <code class="docutils literal notranslate"><span class="pre">obj</span></code> whose contents can be accessed through <code class="docutils literal notranslate"><span class="pre">obj.__dict__</span></code>
or <code class="docutils literal notranslate"><span class="pre">obj.__slots__</span></code>. An object that defines method <code class="docutils literal notranslate"><span class="pre">obj._remove_gvars</span></code>
is replaced by <code class="docutils literal notranslate"><span class="pre">obj._remove_gvars(gvlist)</span></code>.</p>
<p>The <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are restored using <code class="docutils literal notranslate"><span class="pre">gvar.distribute_gvars</span></code>: e.g.,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gvlist</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">new_g</span> <span class="o">=</span> <span class="n">gvar</span><span class="o">.</span><span class="n">distribute_gvars</span><span class="p">(</span><span class="n">gvar</span><span class="o">.</span><span class="n">remove_gvars</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">gvlist</span><span class="p">),</span> <span class="n">gvlist</span><span class="p">)</span>
</pre></div>
</div>
<p>creates a copy <code class="docutils literal notranslate"><span class="pre">new_g</span></code> of <code class="docutils literal notranslate"><span class="pre">g</span></code> with the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s restored
(and preserving correlations between different <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s). <code class="docutils literal notranslate"><span class="pre">gvlist</span></code>
contains copies of the restored <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<p>The default treatment of a class instance <code class="docutils literal notranslate"><span class="pre">obj</span></code> without an
<code class="docutils literal notranslate"><span class="pre">obj._remove_gvars(gvlist)</span></code> method is equivalent to adding
the following method to the object’s class</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_remove_gvars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gvlist</span><span class="p">):</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">tmp</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">gvar</span><span class="o">.</span><span class="n">remove_gvars</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">,</span> <span class="n">gvlist</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tmp</span>
</pre></div>
</div>
<p>assuming the class does not use <code class="docutils literal notranslate"><span class="pre">__slots__</span></code>. A class that has
method <code class="docutils literal notranslate"><span class="pre">obj._remove_gvars(gvlist)</span></code> should have a corresponding method
<code class="docutils literal notranslate"><span class="pre">obj._distribute_gvars(gvlist)</span></code>, for use by <a class="reference internal" href="#gvar.distribute_gvars" title="gvar.distribute_gvars"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.distribute_gvars()</span></code></a>.
The default behavior when this method is undefined is equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_distribute_gvars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gvlist</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">gvar</span><span class="o">.</span><span class="n">distribute_gvars</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">,</span> <span class="n">gvlist</span><span class="p">)</span>
</pre></div>
</div>
<p>There are analogous defaults for classes that uses <code class="docutils literal notranslate"><span class="pre">__slots__</span></code>.</p>
<p>These routines are used by <code class="docutils literal notranslate"><span class="pre">gvar.dump</span></code> and <code class="docutils literal notranslate"><span class="pre">gvar.load</span></code> to facilitate
pickling of objects containing <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – Object containing <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>gvlist</strong> – <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s removed from <code class="docutils literal notranslate"><span class="pre">g</span></code> are appended to list <code class="docutils literal notranslate"><span class="pre">gvlist</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Copy of object <code class="docutils literal notranslate"><span class="pre">g</span></code> with <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s replaced by <a class="reference internal" href="#gvar.GVarRef" title="gvar.GVarRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">GVarRef</span></code></a>s.
The <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are appended to <code class="docutils literal notranslate"><span class="pre">gvlist</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.distribute_gvars">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">distribute_gvars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gvlist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.distribute_gvars" title="Permalink to this definition">¶</a></dt>
<dd><p>Distribute <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s from <code class="docutils literal notranslate"><span class="pre">gvlist</span></code> in structure g, replacing <a class="reference internal" href="#gvar.GVarRef" title="gvar.GVarRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVarRef</span></code></a>s.</p>
<p><a class="reference internal" href="#gvar.distribute_gvars" title="gvar.distribute_gvars"><code class="xref py py-func docutils literal notranslate"><span class="pre">distribute_gvars()</span></code></a> undoes what <a class="reference internal" href="#gvar.remove_gvars" title="gvar.remove_gvars"><code class="xref py py-func docutils literal notranslate"><span class="pre">remove_gvars()</span></code></a> does to <code class="docutils literal notranslate"><span class="pre">g</span></code>. See discussion
of <a class="reference internal" href="#gvar.remove_gvars" title="gvar.remove_gvars"><code class="xref py py-func docutils literal notranslate"><span class="pre">remove_gvars()</span></code></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – Object containing <a class="reference internal" href="#gvar.GVarRef" title="gvar.GVarRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">GVarRef</span></code></a>s created by <a class="reference internal" href="#gvar.remove_gvars" title="gvar.remove_gvars"><code class="xref py py-func docutils literal notranslate"><span class="pre">remove_gvars()</span></code></a>.</p></li>
<li><p><strong>gvlist</strong> – List of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s created by <a class="reference internal" href="#gvar.remove_gvars" title="gvar.remove_gvars"><code class="xref py py-func docutils literal notranslate"><span class="pre">remove_gvars()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Object <code class="docutils literal notranslate"><span class="pre">g</span></code> with <a class="reference internal" href="#gvar.GVarRef" title="gvar.GVarRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">GVarRef</span></code></a>s replaced by corresponding <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
from list <code class="docutils literal notranslate"><span class="pre">gvlist</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="gvar.GVarRef">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">GVarRef</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gvlist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.GVarRef" title="Permalink to this definition">¶</a></dt>
<dd><p>Placeholder for a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, used by <a class="reference internal" href="#gvar.remove_gvars" title="gvar.remove_gvars"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.remove_gvars()</span></code></a>.</p>
<p>Typical usage, when <code class="docutils literal notranslate"><span class="pre">g</span></code> is a dictionary containing <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>

<span class="n">gvlist</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">gv</span><span class="o">.</span><span class="n">GVar</span><span class="p">):</span>
        <span class="n">g</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">GVarRef</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">gvlist</span><span class="p">)</span>
</pre></div>
</div>
<p>where at the end <code class="docutils literal notranslate"><span class="pre">gvlist</span></code> contains the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s removed
from <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>The <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are restored using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">gv</span><span class="o">.</span><span class="n">GVarRef</span><span class="p">):</span>
        <span class="n">g</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span><span class="n">k</span><span class="p">](</span><span class="n">gvlist</span><span class="p">)</span>
</pre></div>
</div>
<p>where the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are drawn from list <code class="docutils literal notranslate"><span class="pre">gvlist</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.disassemble">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">disassemble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.disassemble" title="Permalink to this definition">¶</a></dt>
<dd><p>Disassemble collection <code class="docutils literal notranslate"><span class="pre">g</span></code> of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>g</strong> (<em>dict</em><em>, </em><em>array</em><em>, or </em><a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><em>gvar.GVar</em></a>) – Collection of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s to be
disassembled.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.reassemble">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">reassemble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">gvar.gvar.cov</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.reassemble" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert data from <a class="reference internal" href="#gvar.disassemble" title="gvar.disassemble"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.disassemble()</span></code></a> back into <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><em>BufferDict</em></a><em>, </em><em>array</em>) – Disassembled collection of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
from <a class="reference internal" href="#gvar.disassemble" title="gvar.disassemble"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.disassemble()</span></code></a> that are to be reassembled.</p></li>
<li><p><strong>cov</strong> (<em>gvar.smat</em>) – Covariance matrix corresponding to the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
in <code class="docutils literal notranslate"><span class="pre">data</span></code>. (Default is <code class="docutils literal notranslate"><span class="pre">gvar.gvar.cov</span></code>.)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p><a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s contain information about derivatives with respect to the <em>primary</em>
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s from which they were constructed. This information can be extracted using:</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.deriv">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">deriv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.deriv" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute partial derivatives of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code> w.r.t. primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>Primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are those created using <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a> (or any function of
such a variable); see <a class="reference internal" href="#gvar.is_primary" title="gvar.is_primary"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.is_primary()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – A <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or a dictionary whose values are
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>x</strong> – A <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or array of primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. Arrays are typically one
dimensional but can have any shape.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">g</span></code> but with each <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> in it replaced by an array of
derivatives with respect to the primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">x</span></code>.
The derivatives have the same shape as <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd>
</dl>
</dd></dl>

<p>The following functions are used to generate random arrays or dictionaries
from the distribution defined by array (or dictionary) <code class="docutils literal notranslate"><span class="pre">g</span></code> of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.
The random numbers incorporate any correlations implied by the <code class="docutils literal notranslate"><span class="pre">g</span></code>s.</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.raniter">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">raniter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">svdcut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-12</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.raniter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return iterator for random samples from distribution <code class="docutils literal notranslate"><span class="pre">g</span></code></p>
<p>The Gaussian variables (<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> objects) in array (or dictionary) <code class="docutils literal notranslate"><span class="pre">g</span></code>
collectively define a multidimensional gaussian distribution. The
iterator defined by <a class="reference internal" href="#gvar.raniter" title="gvar.raniter"><code class="xref py py-func docutils literal notranslate"><span class="pre">raniter()</span></code></a> generates an array (or dictionary)
containing random numbers drawn from that distribution, with
correlations intact.</p>
<p>The layout for the result is the same as for <code class="docutils literal notranslate"><span class="pre">g</span></code>. So an array of the
same shape is returned if <code class="docutils literal notranslate"><span class="pre">g</span></code> is an array. When <code class="docutils literal notranslate"><span class="pre">g</span></code> is a dictionary,
individual entries <code class="docutils literal notranslate"><span class="pre">g[k]</span></code> may be <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s,
with arbitrary shapes.</p>
<p><a class="reference internal" href="#gvar.raniter" title="gvar.raniter"><code class="xref py py-func docutils literal notranslate"><span class="pre">raniter()</span></code></a> also works when <code class="docutils literal notranslate"><span class="pre">g</span></code> is a single <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, in which case
the resulting iterator returns random numbers drawn from the
distribution specified by <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – An array (or dictionary) of objects of type <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>; or a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>.</p></li>
<li><p><strong>n</strong> (int or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Maximum number of random iterations.
Setting <code class="docutils literal notranslate"><span class="pre">n=None</span></code> (the default) implies there is
no maximum number.</p></li>
<li><p><strong>eps</strong> (<em>float</em>) – If positive, singularities in the correlation matrix
for <code class="docutils literal notranslate"><span class="pre">g</span></code> are regulated using <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a>
with cutoff <code class="docutils literal notranslate"><span class="pre">eps</span></code>. Ignored if <code class="docutils literal notranslate"><span class="pre">svdcut</span></code> is specified (and
not <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p></li>
<li><p><strong>svdcut</strong> (<em>float</em>) – If nonzero, singularities in the correlation
matrix are regulated using <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a>
with an SVD cutoff <code class="docutils literal notranslate"><span class="pre">svdcut</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">svdcut=1e-12</span></code>.</p></li>
<li><p><strong>uniform</strong> (<em>float</em><em> or </em><em>None</em>) – Replace Gaussian distribution specified
by <code class="docutils literal notranslate"><span class="pre">g</span></code> with a uniform distribution covering the interval
<code class="docutils literal notranslate"><span class="pre">[-uniform,</span> <span class="pre">uniform]</span></code> times the standard deviation centered
on the mean (along each principal axis of the error ellipse).
Ignored if <code class="docutils literal notranslate"><span class="pre">None</span></code> (default).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An iterator that returns random arrays or dictionaries
with the same shape as <code class="docutils literal notranslate"><span class="pre">g</span></code> drawn from the Gaussian distribution
defined by <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.sample">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">sample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">svdcut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-12</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate random sample from distribution <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>Equivalent to <code class="docutils literal notranslate"><span class="pre">next(gvar.raniter(g,</span> <span class="pre">svdcut=svdcut,</span> <span class="pre">eps=eps))</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – An array or dictionary of objects of type <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>; or a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>.</p></li>
<li><p><strong>eps</strong> (<em>float</em>) – If positive, singularities in the correlation matrix
for <code class="docutils literal notranslate"><span class="pre">g</span></code> are regulated using <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a>
with cutoff <code class="docutils literal notranslate"><span class="pre">eps</span></code>. Ignored if <code class="docutils literal notranslate"><span class="pre">svdcut</span></code> is specified (and
not <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p></li>
<li><p><strong>svdcut</strong> (<em>float</em>) – If nonzero, singularities in the correlation
matrix are regulated using <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a>
with an SVD cutoff <code class="docutils literal notranslate"><span class="pre">svdcut</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">svdcut=1e-12</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A random array or dictionary, with the same shape as <code class="docutils literal notranslate"><span class="pre">g</span></code>,
drawn from the Gaussian distribution defined by <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.bootstrap_iter">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">bootstrap_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">svdcut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-12</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.bootstrap_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return iterator for bootstrap copies of <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>The gaussian variables (<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> objects) in array (or dictionary) <code class="docutils literal notranslate"><span class="pre">g</span></code>
collectively define a multidimensional gaussian distribution. The
iterator created by <a class="reference internal" href="#gvar.bootstrap_iter" title="gvar.bootstrap_iter"><code class="xref py py-func docutils literal notranslate"><span class="pre">bootstrap_iter()</span></code></a> generates an array (or
dictionary) of new <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s whose covariance matrix is the same as
<code class="docutils literal notranslate"><span class="pre">g</span></code>’s but whose means are drawn at random from the original <code class="docutils literal notranslate"><span class="pre">g</span></code>
distribution. This is a <em>bootstrap copy</em> of the original distribution.
Each iteration of the iterator has different means (but the same
covariance matrix).</p>
<p><a class="reference internal" href="#gvar.bootstrap_iter" title="gvar.bootstrap_iter"><code class="xref py py-func docutils literal notranslate"><span class="pre">bootstrap_iter()</span></code></a> also works when <code class="docutils literal notranslate"><span class="pre">g</span></code> is a single <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, in
which case the resulting iterator returns bootstrap copies of the
<code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – An array (or dictionary) of objects of type <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>.</p></li>
<li><p><strong>n</strong> – Maximum number of random iterations. Setting <code class="docutils literal notranslate"><span class="pre">n=None</span></code>
(the default) implies there is no maximum number.</p></li>
<li><p><strong>eps</strong> (<em>float</em>) – If positive, singularities in the correlation matrix
for <code class="docutils literal notranslate"><span class="pre">g</span></code> are regulated using <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a>
with cutoff <code class="docutils literal notranslate"><span class="pre">eps</span></code>. Ignored if <code class="docutils literal notranslate"><span class="pre">svdcut</span></code> is specified (and
not <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p></li>
<li><p><strong>svdcut</strong> (<em>float</em>) – If nonzero, singularities in the correlation
matrix are regulated using <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a>
with an SVD cutoff <code class="docutils literal notranslate"><span class="pre">svdcut</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">svdcut=1e-12</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An iterator that returns bootstrap copies of <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
</dd>
</dl>
</dd></dl>

<p>This function is used to seed the random number generator used by <a class="reference internal" href="#module-gvar" title="gvar: Correlated Gaussian random variables."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar</span></code></a>:</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.ranseed">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">ranseed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.ranseed" title="Permalink to this definition">¶</a></dt>
<dd><p>Seed random number generators with tuple <code class="docutils literal notranslate"><span class="pre">seed</span></code>.</p>
<p>Argument <code class="docutils literal notranslate"><span class="pre">seed</span></code> is an integer or
a <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code> of integers that is used to seed
the random number generators used by <code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code> and
<code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code> (and therefore by <a class="reference internal" href="#module-gvar" title="gvar: Correlated Gaussian random variables."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar</span></code></a>). Reusing
the same <code class="docutils literal notranslate"><span class="pre">seed</span></code> results in the same set of random numbers.</p>
<p><code class="docutils literal notranslate"><span class="pre">ranseed</span></code> generates its own seed when called without an argument
or with <code class="docutils literal notranslate"><span class="pre">seed=None</span></code>. This seed is stored in <code class="docutils literal notranslate"><span class="pre">ranseed.seed</span></code> and
also returned by the function. The seed can be used to regenerate
the same set of random numbers at a later time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seed</strong> (<em>int</em><em>, </em><em>tuple</em><em>, or </em><em>None</em>) – Seed for generator. Generates a
random tuple if <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The seed used to reseed the generator.</p>
</dd>
</dl>
</dd></dl>

<p>The following two functions that are useful for tabulating results
and for analyzing where the errors in a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> constructed from
other <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s come from:</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.fmt_errorbudget">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">fmt_errorbudget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndecimal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verify</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colwidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.fmt_errorbudget" title="Permalink to this definition">¶</a></dt>
<dd><p>Tabulate error budget for <code class="docutils literal notranslate"><span class="pre">outputs[ko]</span></code> due to <code class="docutils literal notranslate"><span class="pre">inputs[ki]</span></code>.</p>
<p>For each output <code class="docutils literal notranslate"><span class="pre">outputs[ko]</span></code>, <code class="docutils literal notranslate"><span class="pre">fmt_errorbudget</span></code> computes the
contributions to <code class="docutils literal notranslate"><span class="pre">outputs[ko]</span></code>’s standard deviation coming from the
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s collected in <code class="docutils literal notranslate"><span class="pre">inputs[ki]</span></code>. This is done for each key
combination <code class="docutils literal notranslate"><span class="pre">(ko,ki)</span></code> and the results are tabulated with columns and
rows labeled by <code class="docutils literal notranslate"><span class="pre">ko</span></code> and <code class="docutils literal notranslate"><span class="pre">ki</span></code>, respectively. If a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> in
<code class="docutils literal notranslate"><span class="pre">inputs[ki]</span></code> is correlated with other <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, the contribution from
the others is included in the <code class="docutils literal notranslate"><span class="pre">ki</span></code> contribution as well (since
contributions from correlated <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s cannot be distinguished). The table
is returned as a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>outputs</strong> – Dictionary of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s for which an error budget
is computed.</p></li>
<li><p><strong>inputs</strong> – Dictionary of: <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, arrays/dictionaries of
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or lists of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays/dictionaries of
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. <code class="docutils literal notranslate"><span class="pre">fmt_errorbudget</span></code> tabulates the parts of the standard
deviations of each <code class="docutils literal notranslate"><span class="pre">outputs[ko]</span></code> due to each <code class="docutils literal notranslate"><span class="pre">inputs[ki]</span></code>.</p></li>
<li><p><strong>ndecimal</strong> (<em>int</em>) – Number of decimal places displayed in table.</p></li>
<li><p><strong>percent</strong> (<em>bool</em>) – Tabulate % errors if <code class="docutils literal notranslate"><span class="pre">percent</span> <span class="pre">is</span> <span class="pre">True</span></code>;
otherwise tabulate the errors themselves.</p></li>
<li><p><strong>colwidth</strong> (<em>int</em>) – Width of each column. This is set automatically,
to accommodate label widths, if <code class="docutils literal notranslate"><span class="pre">colwidth=None</span></code> (default).</p></li>
<li><p><strong>verify</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, a warning is issued if: 1) different
inputs are correlated (and therefore double count errors); or
2) the sum (in quadrature) of partial errors is not equal to
the total error to within 0.1% of the error (and the error
budget is incomplete or overcomplete). No checking is done
if <code class="docutils literal notranslate"><span class="pre">verify==False</span></code> (default).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A table (<code class="docutils literal notranslate"><span class="pre">str</span></code>) containing the error budget.
Output variables are labeled by the keys in <code class="docutils literal notranslate"><span class="pre">outputs</span></code>
(columns); sources of uncertainty are labeled by the keys in
<code class="docutils literal notranslate"><span class="pre">inputs</span></code> (rows).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.fmt_values">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">fmt_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndecimal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.fmt_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Tabulate <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">outputs</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>outputs</strong> – A dictionary of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> objects.</p></li>
<li><p><strong>ndecimal</strong> (<em>int</em>) – Format values <code class="docutils literal notranslate"><span class="pre">v</span></code> using <code class="docutils literal notranslate"><span class="pre">v.fmt(ndecimal)</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A table (<code class="docutils literal notranslate"><span class="pre">str</span></code>) containing values and standard
deviations for variables in <code class="docutils literal notranslate"><span class="pre">outputs</span></code>, labeled by the keys
in <code class="docutils literal notranslate"><span class="pre">outputs</span></code>.</p>
</dd>
</dl>
</dd></dl>

<p>The following functions are used to make correlation matrices
less singular:</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.regulate">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">regulate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">svdcut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wgts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.regulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Regulate singularities in the correlation matrix of the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>Standard usage is, for example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>

<span class="c1"># with eps cutoff</span>
<span class="n">gmod</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">regulate</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">eps</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">)</span>

<span class="c1"># or with svd cutoff</span>
<span class="n">gmod</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">regulate</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">svdcut</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">g</span></code> is an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or a dictionary containing <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. The result <code class="docutils literal notranslate"><span class="pre">gmod</span></code> is a copy of <code class="docutils literal notranslate"><span class="pre">g</span></code>
whose <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s have been modified to make their correlation matrix
less singular than that of the original <code class="docutils literal notranslate"><span class="pre">g</span></code>. Parameter <code class="docutils literal notranslate"><span class="pre">eps</span></code> or
<code class="docutils literal notranslate"><span class="pre">svdcut</span></code> specifies the extent of the modification.</p>
<p>The modification of <code class="docutils literal notranslate"><span class="pre">g</span></code> is implemented by adding a set of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
with zero means:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gmod</span> <span class="o">=</span> <span class="n">g</span> <span class="o">+</span> <span class="n">gmod</span><span class="o">.</span><span class="n">correction</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">gmod.correction</span></code> is an array/dictionary containing the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.
When <code class="docutils literal notranslate"><span class="pre">g</span></code> is an array and <code class="docutils literal notranslate"><span class="pre">eps</span></code> is specified, for example,
<code class="docutils literal notranslate"><span class="pre">g[i]</span></code> is modified by adding:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gmod</span><span class="o">.</span><span class="n">correction</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">eps</span> <span class="o">*</span> <span class="n">norm</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">g</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">sdev</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">norm</span> <span class="pre">=</span> <span class="pre">numpy.linalg.norm(corr,</span> <span class="pre">numpy.inf)</span></code> is an estimate
of the largest eigenvalue of the correlation matrix <code class="docutils literal notranslate"><span class="pre">corr</span></code>. This
correction typically has a negligible effect on the final standard
deviations (relative order <code class="docutils literal notranslate"><span class="pre">eps*norm/2</span></code>), but can make noticeable
changes in the correlation matrix for highly correlated data. Strong
correlations lead to small eigenvalues in the correlation matrix,
and these are significantly increased by the cutoff, which in effect
replaces each eigenvalue <code class="docutils literal notranslate"><span class="pre">eig</span></code> by  <code class="docutils literal notranslate"><span class="pre">eig</span> <span class="pre">+</span> <span class="pre">eps</span> <span class="pre">*</span> <span class="pre">norm</span></code>. Only members
of <code class="docutils literal notranslate"><span class="pre">g</span></code> that are correlated with other members of <code class="docutils literal notranslate"><span class="pre">g</span></code> are modified;
uncorrelated members are left unchanged (i.e., the correction
is <code class="docutils literal notranslate"><span class="pre">gv.gvar(0,0)</span></code>).</p>
<p>Adding <code class="docutils literal notranslate"><span class="pre">gmod.correction</span></code> to <code class="docutils literal notranslate"><span class="pre">g</span></code> increases the uncertainties in <code class="docutils literal notranslate"><span class="pre">g</span></code>
but does not affect random fluctuations in its mean values.
If parameter <code class="docutils literal notranslate"><span class="pre">noise=True</span></code>, random noise is included in
<code class="docutils literal notranslate"><span class="pre">gmod.correction</span></code>,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gmod</span><span class="o">.</span><span class="n">correction</span> <span class="o">+=</span> <span class="n">gv</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">gmod</span><span class="o">.</span><span class="n">correction</span><span class="p">),</span>
</pre></div>
</div>
<p>before it is added to <code class="docutils literal notranslate"><span class="pre">g</span></code>. This adds random fluctuations to the means
in <code class="docutils literal notranslate"><span class="pre">gmod</span></code> that are commensurate with the additions to the uncertainties.
This is important, for example, when interpreting a <code class="docutils literal notranslate"><span class="pre">chi**2</span></code>
involving <code class="docutils literal notranslate"><span class="pre">gmod</span></code>, since <code class="docutils literal notranslate"><span class="pre">chi**2</span></code> compares fluctuations in
the means with the uncertainties.</p>
<p>Specifying <code class="docutils literal notranslate"><span class="pre">svdcut</span></code> rather than <code class="docutils literal notranslate"><span class="pre">eps</span></code> regulates the correlation
matrix using <a class="reference internal" href="#gvar.svd" title="gvar.svd"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.svd()</span></code></a>: calling <code class="docutils literal notranslate"><span class="pre">gvar.regulate(g,</span> <span class="pre">svdcut=1e-4)</span></code>
is the same as calling <code class="docutils literal notranslate"><span class="pre">gvar.svd(g,</span> <span class="pre">svdcut=1e-4)</span></code>. When <code class="docutils literal notranslate"><span class="pre">svdcut&gt;=0</span></code>,
each eigenvalue <code class="docutils literal notranslate"><span class="pre">eig</span></code> of the correlation matrix is
replaced by <code class="docutils literal notranslate"><span class="pre">max(eig,</span> <span class="pre">svdcut</span> <span class="pre">*</span> <span class="pre">max_eig)</span></code> where <code class="docutils literal notranslate"><span class="pre">max_eig</span></code> is
the largest eigenvalue. See the <a class="reference internal" href="#gvar.svd" title="gvar.svd"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.svd()</span></code></a> documentation for
more details. SVD cuts are numerically more robust, but more costly,
especially for large systems.</p>
<p>There are a variety of reasons for regulating the correlation matrices.
Roundoff error, for example, can make the smallest eigenvalues unreliable
and destabilize calulations involving the correlation matrix. A similar
situation arises when the correlation matrix is estimated from a small set
of random data. This can result in small eigenvalues that are badly
underestimated.</p>
<p>There is an additional parameter <code class="docutils literal notranslate"><span class="pre">wgts</span></code> in <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a> whose
default value is <code class="docutils literal notranslate"><span class="pre">False</span></code>. Setting <code class="docutils literal notranslate"><span class="pre">wgts=1</span></code> or <code class="docutils literal notranslate"><span class="pre">wgts=-1</span></code> instead
causes <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a> to return a tuple <code class="docutils literal notranslate"><span class="pre">(gmod,</span> <span class="pre">i_wgts)</span></code> where
<code class="docutils literal notranslate"><span class="pre">gmod</span></code>  is the modified copy of <code class="docutils literal notranslate"><span class="pre">g</span></code>, and <code class="docutils literal notranslate"><span class="pre">i_wgts</span></code> contains a
decomposition of either the modified covariance matrix, when <code class="docutils literal notranslate"><span class="pre">wgts=1</span></code>, or
the inverse of the modified covariance matrix, when <code class="docutils literal notranslate"><span class="pre">wgts=-1</span></code>.
The covariance matrix is decomposed into non-overlapping sub-matrices,
with <code class="docutils literal notranslate"><span class="pre">i_wgts[0]</span></code> containing the contributions from all 1x1 sub-matrices.
Typical usage, for example to compute the inverse <code class="docutils literal notranslate"><span class="pre">inv_cov</span></code> of the
<code class="docutils literal notranslate"><span class="pre">gmod</span></code> covariance matrix, is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gmod</span><span class="p">,</span> <span class="n">i_wgts</span> <span class="o">=</span> <span class="n">gvar</span><span class="o">.</span><span class="n">regulate</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">eps</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">wgts</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">inv_cov</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">gmod</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">gmod</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
<span class="c1"># 1x1 sub-matrices</span>
<span class="n">i</span><span class="p">,</span> <span class="n">wgts</span> <span class="o">=</span> <span class="n">i_wgts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">inv_cov</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">wgts</span> <span class="o">**</span> <span class="mi">2</span>
<span class="c1"># nxn sub-matrices (n&gt;1)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">wgts</span> <span class="ow">in</span> <span class="n">i_wgts</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="n">inv_cov</span><span class="p">[</span><span class="n">i</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">wgts</span><span class="o">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">wgts</span>
</pre></div>
</div>
<p>Similarly, we can  compute the expectation value, <code class="docutils literal notranslate"><span class="pre">u.dot(inv_cov.dot(v))</span></code>,
between two vectors (<code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code> arrays) using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">i</span><span class="p">,</span> <span class="n">wgts</span> <span class="o">=</span> <span class="n">i_wgts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># 1x1 sub-matrices</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">+=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">wgts</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">wgts</span><span class="p">))</span>
<span class="c1"># nxn sub-matrices (n&gt;1)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">wgts</span> <span class="ow">in</span> <span class="n">i_wgts</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="n">result</span> <span class="o">+=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">wgts</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">*</span> <span class="n">wgts</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">result</span></code> is the desired expectation value.</p>
<p>These decompositions are useful for least squares fitting and simulating
correlated data. A Cholesky decomposition is used when <code class="docutils literal notranslate"><span class="pre">eps</span></code> is specified,
while an SVD decomposition is used with <code class="docutils literal notranslate"><span class="pre">svdcut</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – An array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or a dicitionary whose values are
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>eps</strong> (<em>float</em>) – The diagonal elements of the <code class="docutils literal notranslate"><span class="pre">g</span></code> covariance matrix
are multiplied by <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">eps*norm</span></code> where <code class="docutils literal notranslate"><span class="pre">norm</span></code> is the norm of
the correlation matrix, <code class="docutils literal notranslate"><span class="pre">numpy.linalg.norm(corr,</span> <span class="pre">numpy.inf)</span></code>.
Ignored if <code class="docutils literal notranslate"><span class="pre">svdcut</span></code> is specified (and not <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p></li>
<li><p><strong>svdcut</strong> (<em>float</em>) – If positive, replaces eigenvalues <code class="docutils literal notranslate"><span class="pre">eig</span></code>
of the correlation matrix with <code class="docutils literal notranslate"><span class="pre">max(eig,</span> <span class="pre">svdcut</span> <span class="pre">*</span> <span class="pre">max_eig)</span></code>
where <code class="docutils literal notranslate"><span class="pre">max_eig</span></code> is the largest eigenvalue; if negative, discards
eigenmodes with eigenvalues smaller than <code class="docutils literal notranslate"><span class="pre">|svdcut|</span> <span class="pre">*</span> <span class="pre">max_eig</span></code>.
Note <code class="docutils literal notranslate"><span class="pre">|svdcut|</span> <span class="pre">&lt;</span> <span class="pre">1</span></code>. Default is 1e-12.</p></li>
<li><p><strong>wgts</strong> – Setting <code class="docutils literal notranslate"><span class="pre">wgts=1</span></code> causes <a class="reference internal" href="#gvar.regulate" title="gvar.regulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.regulate()</span></code></a> to compute
and return a decomposition of the covariance matrix of
the modified <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, <code class="docutils literal notranslate"><span class="pre">gmod</span></code>. Setting <code class="docutils literal notranslate"><span class="pre">wgts=-1</span></code> results in
a decomposition of the inverse of the covariance matrix. The
default value is <code class="docutils literal notranslate"><span class="pre">False</span></code>, in which case only <code class="docutils literal notranslate"><span class="pre">gmod</span></code> is returned.</p></li>
<li><p><strong>noise</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, noise is added to the correction (see
above). Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A copy <code class="docutils literal notranslate"><span class="pre">gmod</span></code> of <code class="docutils literal notranslate"><span class="pre">g</span></code> with the modified correlation matrix.
If <code class="docutils literal notranslate"><span class="pre">wgts</span></code> is not <code class="docutils literal notranslate"><span class="pre">False</span></code>, a tuple <code class="docutils literal notranslate"><span class="pre">(g,</span> <span class="pre">i_wgts)</span></code> is returned
where <code class="docutils literal notranslate"><span class="pre">i_wgts</span></code> contains a decomposition of the <code class="docutils literal notranslate"><span class="pre">gmod</span></code>
covariance matrix or its inverse (see above).</p>
</dd>
</dl>
<p>Additional information is stored in <code class="docutils literal notranslate"><span class="pre">gmod</span></code>:</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">correction</span></span></dt>
<dd><p>Array or dictionary containing the SVD corrections added to <code class="docutils literal notranslate"><span class="pre">g</span></code>
to create <code class="docutils literal notranslate"><span class="pre">gmod</span></code>: <code class="docutils literal notranslate"><span class="pre">gmod</span> <span class="pre">=</span> <span class="pre">g</span> <span class="pre">+</span> <span class="pre">gmod.correction</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">eps</span></span></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">eps</span></code> used to create <code class="docutils literal notranslate"><span class="pre">gmod</span></code> if set (otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">svdcut</span></span></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">svdcut</span></code> used to create <code class="docutils literal notranslate"><span class="pre">gmod</span></code> if set (otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">dof</span></span></dt>
<dd><p>Number of degrees of freedom in <code class="docutils literal notranslate"><span class="pre">gmod</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">nmod</span></span></dt>
<dd><p>Number of members of <code class="docutils literal notranslate"><span class="pre">gmod</span></code> modified by regulation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">nblocks</span></span></dt>
<dd><p>A dictionary where <code class="docutils literal notranslate"><span class="pre">gmod.nblocks[s]</span></code> contains the number of
block-diagonal <code class="docutils literal notranslate"><span class="pre">s</span></code>-by-<code class="docutils literal notranslate"><span class="pre">s</span></code> sub-matrices in the correlation
matrix. Useful for debugging.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">logdet</span></span></dt>
<dd><p>Logarithm of the determinant of the covariance matrix after <code class="docutils literal notranslate"><span class="pre">eps</span></code>
regulation is applied.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.svd">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">svd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">svdcut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wgts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply SVD cuts to collection of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>Standard usage is, for example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="o">...</span>
<span class="n">gmod</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">svdcut</span><span class="o">=</span><span class="mf">1e-4</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">g</span></code> is an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or a dictionary containing <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. When <code class="docutils literal notranslate"><span class="pre">svdcut&gt;0</span></code>, <code class="docutils literal notranslate"><span class="pre">gmod</span></code> is
a copy of <code class="docutils literal notranslate"><span class="pre">g</span></code> whose <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s have been modified to make
their correlation matrix less singular than that of the
original <code class="docutils literal notranslate"><span class="pre">g</span></code>: each eigenvalue <code class="docutils literal notranslate"><span class="pre">eig</span></code> of the correlation matrix is
replaced by <code class="docutils literal notranslate"><span class="pre">max(eig,</span> <span class="pre">svdcut</span> <span class="pre">*</span> <span class="pre">max_eig)</span></code> where <code class="docutils literal notranslate"><span class="pre">max_eig</span></code> is
the largest eigenvalue. This SVD cut, which is applied separately
to each block-diagonal sub-matrix of the correlation matrix,
increases the variance of the eigenmodes with eigenvalues smaller
than <code class="docutils literal notranslate"><span class="pre">svdcut</span> <span class="pre">*</span> <span class="pre">max_eig</span></code>.</p>
<p>The modification of <code class="docutils literal notranslate"><span class="pre">g</span></code>’s covariance matrix is implemented by adding
(to <code class="docutils literal notranslate"><span class="pre">g</span></code>) a set of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s with zero means:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gmod</span> <span class="o">=</span> <span class="n">g</span> <span class="o">+</span> <span class="n">gmod</span><span class="o">.</span><span class="n">correction</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">gmod.correction</span></code> is an array/dictionary containing the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<p>Adding <code class="docutils literal notranslate"><span class="pre">gmod.correction</span></code> to <code class="docutils literal notranslate"><span class="pre">g</span></code> increases the uncertainties in <code class="docutils literal notranslate"><span class="pre">g</span></code>
but does not affect random fluctuations in the mean values.
If parameter <code class="docutils literal notranslate"><span class="pre">noise=True</span></code>, random noise is included in
<code class="docutils literal notranslate"><span class="pre">gmod.correction</span></code>,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gmod</span><span class="o">.</span><span class="n">correction</span> <span class="o">+=</span> <span class="n">gv</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">gmod</span><span class="o">.</span><span class="n">correction</span><span class="p">),</span>
</pre></div>
</div>
<p>before it is added to <code class="docutils literal notranslate"><span class="pre">g</span></code>. This adds random fluctuations to the means
in <code class="docutils literal notranslate"><span class="pre">gmod</span></code> that are commensurate with the additions to the uncertainties.
This is important, for example, when interpreting a <code class="docutils literal notranslate"><span class="pre">chi**2</span></code>
involving <code class="docutils literal notranslate"><span class="pre">gmod</span></code>, since <code class="docutils literal notranslate"><span class="pre">chi**2</span></code> tests whether fluctuations in
the means are consistent with the uncertainties.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">svdcut</span></code> is negative, eigenmodes of the correlation matrix
whose eigenvalues are smaller than <code class="docutils literal notranslate"><span class="pre">|svdcut|</span> <span class="pre">*</span> <span class="pre">max_eig</span></code> are dropped
from the new matrix and the corresponding components of <code class="docutils literal notranslate"><span class="pre">g</span></code> are
zeroed out (that is, replaced by 0(0)) in <code class="docutils literal notranslate"><span class="pre">gmod</span></code>.</p>
<p>There is an additional parameter <code class="docutils literal notranslate"><span class="pre">wgts</span></code> in <a class="reference internal" href="#gvar.svd" title="gvar.svd"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.svd()</span></code></a> whose
default value is <code class="docutils literal notranslate"><span class="pre">False</span></code>. Setting <code class="docutils literal notranslate"><span class="pre">wgts=1</span></code> or <code class="docutils literal notranslate"><span class="pre">wgts=-1</span></code> instead
causes <a class="reference internal" href="#gvar.svd" title="gvar.svd"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.svd()</span></code></a> to return a tuple <code class="docutils literal notranslate"><span class="pre">(gmod,</span> <span class="pre">i_wgts)</span></code> where
<code class="docutils literal notranslate"><span class="pre">gmod</span></code>  is the modified copy of <code class="docutils literal notranslate"><span class="pre">g</span></code>, and <code class="docutils literal notranslate"><span class="pre">i_wgts</span></code> contains an SVD
decomposition of either the modified covariance matrix, when <code class="docutils literal notranslate"><span class="pre">wgts=1</span></code>, or
the inverse of the modified covariance matrix, when <code class="docutils literal notranslate"><span class="pre">wgts=-1</span></code>.
The covariance matrix is decomposed into non-overlapping sub-matrices,
with <code class="docutils literal notranslate"><span class="pre">i_wgts[0]</span></code> containing the contributions from all 1x1 sub-matrices.
Typical usage, for example to compute the inverse <code class="docutils literal notranslate"><span class="pre">inv_cov</span></code> of the
<code class="docutils literal notranslate"><span class="pre">gmod</span></code> covariance matrix, is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gmod</span><span class="p">,</span> <span class="n">i_wgts</span> <span class="o">=</span> <span class="n">gvar</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">svdcut</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">wgts</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">inv_cov</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">gmod</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">gmod</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
<span class="c1"># 1x1 sub-matrices</span>
<span class="n">i</span><span class="p">,</span> <span class="n">wgts</span> <span class="o">=</span> <span class="n">i_wgts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">inv_cov</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">wgts</span> <span class="o">**</span> <span class="mi">2</span>
<span class="c1"># nxn sub-matrices (n&gt;1)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">wgts</span> <span class="ow">in</span> <span class="n">i_wgts</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="n">inv_cov</span><span class="p">[</span><span class="n">i</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">wgts</span><span class="o">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">wgts</span>
</pre></div>
</div>
<p>Similarly, we can  compute the expectation value, <code class="docutils literal notranslate"><span class="pre">u.dot(inv_cov.dot(v))</span></code>,
between two vectors (<code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code> arrays) using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">i</span><span class="p">,</span> <span class="n">wgts</span> <span class="o">=</span> <span class="n">i_wgts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># 1x1 sub-matrices</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">+=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">wgts</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">wgts</span><span class="p">))</span>
<span class="c1"># nxn sub-matrices (n&gt;1)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">wgts</span> <span class="ow">in</span> <span class="n">i_wgts</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="n">result</span> <span class="o">+=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">wgts</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">*</span> <span class="n">wgts</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">result</span></code> is the desired expectation value. The SVD
decompositions are useful for least squares fitting and simulating
correlated data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – An array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or a dicitionary whose values are
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>svdcut</strong> (<em>None</em><em> or </em><em>float</em>) – If positive, replace eigenvalues <code class="docutils literal notranslate"><span class="pre">eig</span></code>
of the correlation matrix with <code class="docutils literal notranslate"><span class="pre">max(eig,</span> <span class="pre">svdcut</span> <span class="pre">*</span> <span class="pre">max_eig)</span></code>
where <code class="docutils literal notranslate"><span class="pre">max_eig</span></code> is the largest eigenvalue; if negative, discard
eigenmodes with eigenvalues smaller than <code class="docutils literal notranslate"><span class="pre">|svdcut|</span> <span class="pre">*</span> <span class="pre">max_eig</span></code>.
Note <code class="docutils literal notranslate"><span class="pre">|svdcut|</span> <span class="pre">&lt;</span> <span class="pre">1</span></code>. Default is 1e-12.</p></li>
<li><p><strong>wgts</strong> – Setting <code class="docutils literal notranslate"><span class="pre">wgts=1</span></code> causes <a class="reference internal" href="#gvar.svd" title="gvar.svd"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.svd()</span></code></a> to compute
and return a spectral decomposition of the covariance matrix of
the modified <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, <code class="docutils literal notranslate"><span class="pre">gmod</span></code>. Setting <code class="docutils literal notranslate"><span class="pre">wgts=-1</span></code> results in
a decomposition of the inverse of the covariance matrix. The
default value is <code class="docutils literal notranslate"><span class="pre">False</span></code>, in which case only <code class="docutils literal notranslate"><span class="pre">gmod</span></code> is returned.</p></li>
<li><p><strong>noise</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, noise is added to the SVD correction (see
above). Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A copy <code class="docutils literal notranslate"><span class="pre">gmod</span></code> of <code class="docutils literal notranslate"><span class="pre">g</span></code> whose correlation matrix is modified by
SVD cuts. If <code class="docutils literal notranslate"><span class="pre">wgts</span></code> is not <code class="docutils literal notranslate"><span class="pre">False</span></code>,
a tuple <code class="docutils literal notranslate"><span class="pre">(g,</span> <span class="pre">i_wgts)</span></code> is returned where <code class="docutils literal notranslate"><span class="pre">i_wgts</span></code>
contains an SVD decomposition of <code class="docutils literal notranslate"><span class="pre">gmod</span></code>’s
covariance matrix or its inverse.</p>
</dd>
</dl>
<p>Data from the SVD analysis is stored in <code class="docutils literal notranslate"><span class="pre">gmod</span></code>:</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">svdcut</span></span></dt>
<dd><p>SVD cut used to create <code class="docutils literal notranslate"><span class="pre">gmod</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">dof</span></span></dt>
<dd><p>Number of independent degrees of freedom left after the
SVD cut. This is the same as the number initially unless
<code class="docutils literal notranslate"><span class="pre">svdcut</span> <span class="pre">&lt;</span> <span class="pre">0</span></code> in which case it may be smaller.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">nmod</span></span></dt>
<dd><p>Number of modes whose eignevalue was modified by the
SVD cut.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">nblocks</span></span></dt>
<dd><p>A dictionary where <code class="docutils literal notranslate"><span class="pre">gmod.nblocks[s]</span></code> contains the number of
block-diagonal <code class="docutils literal notranslate"><span class="pre">s</span></code>-by-<code class="docutils literal notranslate"><span class="pre">s</span></code> sub-matrices in the correlation
matrix.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">eigen_range</span></span></dt>
<dd><p>Ratio of the smallest to largest eigenvalue before SVD cuts are
applied (but after rescaling).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">logdet</span></span></dt>
<dd><p>Logarithm of the determinant of the covariance matrix after SVD
cuts are applied (excluding any omitted modes when
<code class="docutils literal notranslate"><span class="pre">svdcut</span> <span class="pre">&lt;</span> <span class="pre">0</span></code> and any diagonal zero modes).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">gmod.</span></span><span class="sig-name descname"><span class="pre">correction</span></span></dt>
<dd><p>Array or dictionary containing the SVD corrections added to <code class="docutils literal notranslate"><span class="pre">g</span></code>
to create <code class="docutils literal notranslate"><span class="pre">gmod</span></code>: <code class="docutils literal notranslate"><span class="pre">gmod</span> <span class="pre">=</span> <span class="pre">g</span> <span class="pre">+</span> <span class="pre">gmod.correction</span></code>.</p>
</dd></dl>

</dd></dl>

<p>This function is useful when the correlation matrix is singular
or almost singular, and its inverse is needed (as in curve fitting).</p>
<p>The following function can be used to rebuild collections of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s,
ignoring all correlations with other variables. It can also be used to
introduce correlations between uncorrelated variables.</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.rebuild">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">rebuild</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gvar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">gvar.gvar</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.rebuild" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebuild <code class="docutils literal notranslate"><span class="pre">g</span></code> stripping correlations with variables not in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">g</span></code> is either an array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s or a dictionary containing
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s and/or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. <code class="docutils literal notranslate"><span class="pre">rebuild(g)</span></code> creates a new
collection <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s with the same layout, means and covariance matrix
as those in <code class="docutils literal notranslate"><span class="pre">g</span></code>, but discarding all correlations with variables not
in <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">corr</span></code> is nonzero, <code class="docutils literal notranslate"><span class="pre">rebuild</span></code> will introduce correlations
wherever there aren’t any using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cov</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">corr</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">cov</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">cov</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">j</span><span class="p">])</span>
</pre></div>
</div>
<p>wherever <code class="docutils literal notranslate"><span class="pre">cov[i,j]==0.0</span></code> initially. Positive values for <code class="docutils literal notranslate"><span class="pre">corr</span></code>
introduce positive correlations, negative values anti-correlations.</p>
<p>Parameter <code class="docutils literal notranslate"><span class="pre">gvar</span></code> specifies a function for creating new <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s that
replaces <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a> (the default).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> (<em>array</em><em> or </em><em>dictionary</em>) – <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s to be rebuilt.</p></li>
<li><p><strong>gvar</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVarFactory</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Replacement for <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a> to use in rebuilding.
Default is <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a>.</p></li>
<li><p><strong>corr</strong> (<em>number</em>) – Size of correlations to introduce where none exist
initially.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Array or dictionary (gvar.BufferDict) of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s  (same
layout as <code class="docutils literal notranslate"><span class="pre">g</span></code>) where all correlations with variables other than
those in <code class="docutils literal notranslate"><span class="pre">g</span></code> are erased.</p>
</dd>
</dl>
</dd></dl>

<p>The following functions creates new functions that generate <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s (to
replace <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a>):</p>
<dl class="py function">
<dt class="sig sig-object py" id="gvar.switch_gvar">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">switch_gvar</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gvar.switch_gvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a> to new <code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVarFactory</span></code>.</p>
<p><a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s created from different factory functions (see
<a class="reference internal" href="#gvar.gvar_factory" title="gvar.gvar_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar_factory()</span></code></a>), with different
covariance matrices, should never be mixed in arithmetic or other
expressions. Such mixing is unsupported and will result in
unpredictable behavior. Arithmetic that mixes <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in
this way will generate an error message: “incompatible GVars”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cov</strong> – Covariance matrix for new <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a>. A new
covariance matrix is created if <code class="docutils literal notranslate"><span class="pre">cov=None</span></code> (default).
If <code class="docutils literal notranslate"><span class="pre">cov</span></code> is a <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, the covariance matrix of
the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> is used.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>New <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.restore_gvar">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">restore_gvar</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gvar.restore_gvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore previous <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a>.</p>
<p><a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s created from different factory functions (see
<a class="reference internal" href="#gvar.gvar_factory" title="gvar.gvar_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar_factory()</span></code></a>), with different
covariance matrices, should never be mixed in arithmetic or other
expressions. Such mixing is unsupported and will result in
unpredictable behavior. Arithmetic that mixes <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in
this way will generate an error message: “incompatible GVars”.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Previous <a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gvar.gvar_factory">
<span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">gvar_factory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cov</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.gvar_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return new function for creating <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s (to replace
<a class="reference internal" href="#gvar.gvar" title="gvar.gvar"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.gvar()</span></code></a>).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">cov</span></code> is specified, it is used as the covariance matrix
for new <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s created by the function returned by
<code class="docutils literal notranslate"><span class="pre">gvar_factory(cov)</span></code>. Otherwise a new covariance matrix is created
internally.</p>
<p><a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s created from different factory functions, with different
covariance matrices, should never be mixed in arithmetic or other
expressions. Such mixing is unsupported and will result in
unpredictable behavior. Arithmetic that mixes <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in
this way will generate an error message: “incompatible GVars”.</p>
</dd></dl>

</section>
<section id="gvar-gvar-objects">
<h2><a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> Objects<a class="headerlink" href="#gvar-gvar-objects" title="Permalink to this heading">¶</a></h2>
<p>The fundamental class for representing Gaussian variables is:</p>
<dl class="py class">
<dt class="sig sig-object py" id="gvar.GVar">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">GVar</span></span><a class="headerlink" href="#gvar.GVar" title="Permalink to this definition">¶</a></dt>
<dd><p>The basic attributes are:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.GVar.mean">
<span class="sig-name descname"><span class="pre">mean</span></span><a class="headerlink" href="#gvar.GVar.mean" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean value.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.GVar.sdev">
<span class="sig-name descname"><span class="pre">sdev</span></span><a class="headerlink" href="#gvar.GVar.sdev" title="Permalink to this definition">¶</a></dt>
<dd><p>Standard deviation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.GVar.var">
<span class="sig-name descname"><span class="pre">var</span></span><a class="headerlink" href="#gvar.GVar.var" title="Permalink to this definition">¶</a></dt>
<dd><p>Variance.</p>
</dd></dl>

<p>Two methods allow one to isolate the contributions to the variance
or standard deviation coming from other <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s:</p>
<dl class="py method">
<dt class="sig sig-object py" id="gvar.GVar.partialvar">
<span class="sig-name descname"><span class="pre">partialvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.GVar.partialvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute partial variance due to <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">args</span></code>.</p>
<p>This method computes the part of <code class="docutils literal notranslate"><span class="pre">self.var</span></code> due to the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
in <code class="docutils literal notranslate"><span class="pre">args</span></code>. If <code class="docutils literal notranslate"><span class="pre">args[i]</span></code> is correlated with other <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, the
variance coming from these is included in the result as well. (This
last convention is necessary because variances associated with
correlated <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s cannot be disentangled into contributions
corresponding to each variable separately.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong><strong>[</strong><strong>i</strong><strong>]</strong> – A <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or array/dictionary of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
contributing to the partial variance.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Partial variance due to all of <code class="docutils literal notranslate"><span class="pre">args</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.GVar.partialsdev">
<span class="sig-name descname"><span class="pre">partialsdev</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.GVar.partialsdev" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute partial standard deviation due to <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">args</span></code>.</p>
<p>This method computes the part of <code class="docutils literal notranslate"><span class="pre">self.sdev</span></code> due to the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
in <code class="docutils literal notranslate"><span class="pre">args</span></code>. If <code class="docutils literal notranslate"><span class="pre">args[i]</span></code> is correlated with other <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, the
standard deviation coming from these is included in the result as
well. (This last convention is necessary because variances
associated with correlated <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s cannot be disentangled into
contributions corresponding to each variable separately.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong><strong>[</strong><strong>i</strong><strong>]</strong> (<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or array/dictionary of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s) – Variables contributing to the partial standard
deviation.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Partial standard deviation due to <code class="docutils literal notranslate"><span class="pre">args</span></code>.</p>
</dd>
</dl>
</dd></dl>

<p>Partial derivatives of the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> with respect to the independent
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s from which it was constructed are given by:</p>
<dl class="py method">
<dt class="sig sig-object py" id="gvar.GVar.deriv">
<span class="sig-name descname"><span class="pre">deriv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.GVar.deriv" title="Permalink to this definition">¶</a></dt>
<dd><p>Derivative of <code class="docutils literal notranslate"><span class="pre">self</span></code> with respest to primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>All <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s are constructed from primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s (see
<a class="reference internal" href="#gvar.is_primary" title="gvar.is_primary"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.is_primary()</span></code></a>).  <code class="docutils literal notranslate"><span class="pre">self.deriv(x)</span></code> returns the
partial derivative of <code class="docutils literal notranslate"><span class="pre">self</span></code> with respect to
primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> <code class="docutils literal notranslate"><span class="pre">x</span></code>, holding all of the other
primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s constant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> – A primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or an array of primary <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Derivatives of <code class="docutils literal notranslate"><span class="pre">self</span></code> with respect to the
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s in <code class="docutils literal notranslate"><span class="pre">x</span></code>.  The result has the same
shape as <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd>
</dl>
</dd></dl>

<p>There are three methods for converting <code class="docutils literal notranslate"><span class="pre">self</span></code> into a string for
printing and display, and fourth for modifying the defaults used
in formatting:</p>
<dl class="py method">
<dt class="sig sig-object py" id="gvar.GVar.__format__">
<span class="sig-name descname"><span class="pre">__format__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.GVar.__format__" title="Permalink to this definition">¶</a></dt>
<dd><p>Format strings for <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
<p>Support is provided for standard presentation formats
normally used for floats including: <code class="docutils literal notranslate"><span class="pre">'e'</span></code>, <code class="docutils literal notranslate"><span class="pre">'f'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'g'</span></code>, <code class="docutils literal notranslate"><span class="pre">'n'</span></code>, and <code class="docutils literal notranslate"><span class="pre">'%'</span></code>. The format is applied to
the mean value and the output modified to include the
standard deviation when the mean is larger in magnitude
than the standard deviation: e.g.,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">gvar</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="mf">12.314</span><span class="p">,</span> <span class="mf">1.56</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">.2g</span><span class="si">}</span><span class="s1">&#39;&#39;)</span>
<span class="go">12(2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">.^25.3e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">.....1.231(156)e+01......</span>
</pre></div>
</div>
<p>The format is applied first to the standard deviation when it
is the larger of the two.</p>
<p>There is an additional format, <code class="docutils literal notranslate"><span class="pre">'p'</span></code>, where the precision
field specifies the number  of digits displayed in the
standard deviation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">.2p</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">12.3(1.6)</span>
</pre></div>
</div>
<p>The default precision is 2.</p>
<p>An alternative form <code class="docutils literal notranslate"><span class="pre">'#p'</span></code> of this format may
add further digits to the standard deviation
(when it is larger in magnitude than the mean) so that
at least one non-zero digit of the mean is displayed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">gvar</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">#.2p</span><span class="si">}</span><span class="s1">&#39;&#39;)</span>
<span class="go">9(123)</span>
</pre></div>
</div>
<p>If the mean is exactly zero, the result is ‘0 ± sdev’.</p>
<p>Format <code class="docutils literal notranslate"><span class="pre">'P'</span></code> is similar to <code class="docutils literal notranslate"><span class="pre">'#p'</span></code> but always uses
the plus-minus format: <code class="docutils literal notranslate"><span class="pre">'mean</span> <span class="pre">±</span> <span class="pre">sdev'</span></code>.</p>
<p>The default format, when none is specified,
is ‘{:#.2p}’. This can be changed using
<code class="docutils literal notranslate"><span class="pre">GVar.set(default_format=...)</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.GVar.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gvar.GVar.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns string using the default format: <code class="docutils literal notranslate"><span class="pre">f'{self}'</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.GVar.fmt">
<span class="sig-name descname"><span class="pre">fmt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ndecimal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'{}'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.GVar.fmt" title="Permalink to this definition">¶</a></dt>
<dd><p>Format <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>.</p>
<p>Typical usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">gvar</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="mf">27.9315</span><span class="p">,</span> <span class="mf">1.23</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">fmt</span><span class="p">(),</span> <span class="n">g</span><span class="o">.</span><span class="n">fmt</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{:.2g}</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">fmt</span><span class="p">(</span><span class="n">ndecimal</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="go">27.9(1.2) 28(1) 27.931(1.230)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">fmt</span><span class="p">(</span><span class="n">ndecimal</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span> <span class="n">g</span><span class="o">.</span><span class="n">fmt</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;|&#39;</span><span class="p">))</span>
<span class="go">27.9 ± 1.2 27.9|(1.2)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ndecimal</strong> (<em>int</em><em> or </em><em>None</em>) – Format <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> using
<code class="docutils literal notranslate"><span class="pre">f'{self:.{ndecimal}f}'</span></code> when <code class="docutils literal notranslate"><span class="pre">ndecimal</span></code> is a
non-negative integer, or <code class="docutils literal notranslate"><span class="pre">f'{self:.2P}'</span></code> when
<code class="docutils literal notranslate"><span class="pre">ndecimal</span></code> is negative. Ignored
if <code class="docutils literal notranslate"><span class="pre">ndecimal=None</span></code> (default).</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – String inserted between the <code class="docutils literal notranslate"><span class="pre">mean</span></code>
and the <code class="docutils literal notranslate"><span class="pre">(sdev)</span></code> in <code class="docutils literal notranslate"><span class="pre">'mean(sdev)'</span></code>. Default
is <code class="docutils literal notranslate"><span class="pre">sep=''</span></code>.</p></li>
<li><p><strong>format</strong> (<em>str</em>) – Format string. Ignored if <code class="docutils literal notranslate"><span class="pre">ndecimal</span></code>
is not <code class="docutils literal notranslate"><span class="pre">None</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">'{}'</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Formatted string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.GVar.set">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.GVar.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Change <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>’s format parameters.</p>
<p>Typical usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># change default format spec and plus/minus symbol</span>
<span class="n">oldparam</span> <span class="o">=</span> <span class="n">GVar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">default_format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{:.3f}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">plusminus</span><span class="o">=</span><span class="s1">&#39; +/- &#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="c1"># change back</span>
<span class="n">GVar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">oldparam</span><span class="p">)</span>
</pre></div>
</div>
<p>The following parameters can be reset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>formatter</strong> (<em>callable</em>) – Sets default formatter with function
<code class="docutils literal notranslate"><span class="pre">formatter(g,</span> <span class="pre">spec)</span></code> where <code class="docutils literal notranslate"><span class="pre">g</span></code> is the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> to be
formatted and <code class="docutils literal notranslate"><span class="pre">spec</span></code> is the format specification
(e.g, <code class="docutils literal notranslate"><span class="pre">'.3g'</span></code> or <code class="docutils literal notranslate"><span class="pre">'.^20.3f'</span></code>). Setting
<code class="docutils literal notranslate"><span class="pre">formatter=None</span></code> restores the original formatter.
Setting <code class="docutils literal notranslate"><span class="pre">formatter='old'</span></code> switches to the
formatter used before <a class="reference internal" href="#module-gvar" title="gvar: Correlated Gaussian random variables."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar</span></code></a> version 12.0
(buggy and deprecated).</p></li>
<li><p><strong>default_format</strong> (<em>str</em>) – Sets the format used when
none is specified (<code class="docutils literal notranslate"><span class="pre">default_format='{}'</span></code> is <em>not</em>
allowed). The format can be specified as a
full format string (e.g., <code class="docutils literal notranslate"><span class="pre">'{:.4g}'</span></code>) or with
just the format specification (e.g., <code class="docutils literal notranslate"><span class="pre">'.4g'</span></code>).
Default is <code class="docutils literal notranslate"><span class="pre">'{:#.2p}'</span></code>.</p></li>
<li><p><strong>plusminus</strong> (<em>str</em>) – Sets the plus/minus symbol(s)
for format strings. Default is <code class="docutils literal notranslate"><span class="pre">'</span> <span class="pre">±</span> <span class="pre">'</span></code>.</p></li>
<li><p><strong>prange</strong> (<em>tuple</em>) – Sets range of values of <code class="docutils literal notranslate"><span class="pre">abs(g.mean)/g.sdev</span></code>
formatted with a compressed format when using the
<code class="docutils literal notranslate"><span class="pre">'p'</span></code> presentation format. Values outside this range
are formatted as <code class="docutils literal notranslate"><span class="pre">'{g.mean}</span> <span class="pre">±</span> <span class="pre">{g.sdev}'</span></code> with the
<code class="docutils literal notranslate"><span class="pre">'p'</span></code> format. Default is <code class="docutils literal notranslate"><span class="pre">(1e-5,</span> <span class="pre">10</span> <span class="pre">**</span> <span class="pre">sys.float_info.dig)</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>Two attributes and a method make reference to the original
variables from which <code class="docutils literal notranslate"><span class="pre">self</span></code> is derived:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.GVar.cov">
<span class="sig-name descname"><span class="pre">cov</span></span><a class="headerlink" href="#gvar.GVar.cov" title="Permalink to this definition">¶</a></dt>
<dd><p>Underlying covariance matrix (type <code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.smat</span></code>) shared by all
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.GVar.der">
<span class="sig-name descname"><span class="pre">der</span></span><a class="headerlink" href="#gvar.GVar.der" title="Permalink to this definition">¶</a></dt>
<dd><p>Array of derivatives with respect to  underlying (original)
<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.GVar.dotder">
<span class="sig-name descname"><span class="pre">dotder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.GVar.dotder" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dot product of <code class="docutils literal notranslate"><span class="pre">self.der</span></code> and <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="gvar-bufferdict-objects">
<h2><a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> Objects<a class="headerlink" href="#gvar-bufferdict-objects" title="Permalink to this heading">¶</a></h2>
<p><a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> objects are ordered dictionaries that are heavily used
in <a class="reference internal" href="#module-gvar" title="gvar: Correlated Gaussian random variables."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar</span></code></a>’s implementation. They provide the most flexible
representation for multi-dimensional Gaussian distributions.</p>
<p><a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> objects differ from ordinary dictionaries in two respects. The
first difference is that the dictionary’s values must be scalars or <code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code>
arrays (any shape) of scalars. The scalars can be ordinary integers or floats,
but the dictionary was designed especially for <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.
The dictionary’s  values are packed into different parts of a single
one-dimensional array or buffer. Items can be added one at a time as in other
dictionaries,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">BufferDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">],</span> <span class="p">[</span><span class="mf">5.</span><span class="p">,</span> <span class="mf">6.</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    &#39;s&#39;: 0.0,</span>
<span class="go">    &#39;v&#39;: array([1., 2.]),</span>
<span class="go">    &#39;t&#39;: array([[3., 4.],</span>
<span class="go">                [5., 6.]]),</span>
<span class="go"> }</span>
</pre></div>
</div>
<p>but the values can also be accessed all at once through the buffer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">buf</span><span class="p">)</span>
<span class="go">[0. 1. 2. 3. 4. 5. 6.]</span>
</pre></div>
</div>
<p>A previous entry can be overwritten, but the size, shape, and type of the
data needs to be the same. For example, here setting <code class="docutils literal notranslate"><span class="pre">b['s']</span> <span class="pre">=</span> <span class="pre">[10.,</span> <span class="pre">20.]</span></code>
would generate a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> exception, but <code class="docutils literal notranslate"><span class="pre">b['s']</span> <span class="pre">=</span> <span class="pre">22.</span></code> is fine.</p>
<p>The second difference between <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a>s and other dictionaries is
illustrated by the following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">BufferDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;log(a)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="s1">&#39;1(1)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">{&#39;log(a)&#39;: 1.0(1.0)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="s1">&#39;log(a)&#39;</span><span class="p">])</span>
<span class="go">2.7(2.7) 1.0(1.0)</span>
</pre></div>
</div>
<p>Even though <code class="docutils literal notranslate"><span class="pre">'a'</span></code> is not a key in the dictionary, <code class="docutils literal notranslate"><span class="pre">b['a']</span></code> is still
defined: it equals <code class="docutils literal notranslate"><span class="pre">exp(b['log(a)'])</span></code>. This feature is used to provide
(limited) support for non-Gaussian distributions. Here <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> <code class="docutils literal notranslate"><span class="pre">b</span></code>
specifies a distribution that is Gaussain for <code class="docutils literal notranslate"><span class="pre">p['log(a)']</span></code>, and
therefore log-normal for <code class="docutils literal notranslate"><span class="pre">p['a']</span></code>. Thus, for example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gv</span><span class="o">.</span><span class="n">raniter</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">4</span><span class="p">)]</span>
<span class="go">[2.1662650927997817, 2.3350022125310317, 8.732161128765775, 3.578188553455522]</span>
</pre></div>
</div>
<p>creates a list of four random numbers drawn from a log-normal distribution.
Note that <code class="docutils literal notranslate"><span class="pre">'a'</span></code> in this
example is <em>not</em> a key in dictionary <code class="docutils literal notranslate"><span class="pre">b</span></code>, even though both <code class="docutils literal notranslate"><span class="pre">b['a']</span></code>
and <code class="docutils literal notranslate"><span class="pre">b.get('a')</span></code> return values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">b</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;log(a)&#39;</span> <span class="ow">in</span> <span class="n">b</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
<span class="go">[&#39;log(a)&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="n">b</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">))</span>
<span class="go">2.7(2.7) 2.7(2.7)</span>
</pre></div>
</div>
<p>This functionality is used routinely by other modules (e.g., <code class="xref py py-mod docutils literal notranslate"><span class="pre">lsqfit</span></code>).
The supported distributions, and methods for adding new ones, are
described in the documentation for <a class="reference internal" href="#gvar.BufferDict.add_distribution" title="gvar.BufferDict.add_distribution"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.BufferDict.add_distribution()</span></code></a>,
below.</p>
<dl class="py class">
<dt class="sig sig-object py" id="gvar.BufferDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">BufferDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.BufferDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Ordered dictionary whose values are packed into a 1-d buffer (<code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code> array).</p>
<p><a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a>s can be created in the usual way dictionaries are created:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.7</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 1.0, &#39;b&#39;: array([2.7, 3.2])}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">buf</span><span class="p">)</span>
<span class="go">[1. 2.7 3.2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="mf">2.7</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">([(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,[</span><span class="mf">2.7</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">])])</span>
</pre></div>
</div>
<p>They can also be created from other dictionaries or <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a>s:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 1.0, &#39;b&#39;: 2.7}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">{&#39;b&#39;: 2.7}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">keys</span></code> keyword restricts the copy of a dictionary to entries whose
keys are in <code class="docutils literal notranslate"><span class="pre">keys</span></code>.</p>
<p>The values in a <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> are scalars or arrays of a scalar type
(<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, etc.). The data type of the buffer is
normally inferred (dynamically) from the data itself:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 1} int64</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2.7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 1.0, &#39;b&#39;: 2.7} float64</span>
</pre></div>
</div>
<p>The data type of the <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a>’s buffer can be specified
when creating the <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> from another dictionary or list
by using keyword <code class="docutils literal notranslate"><span class="pre">dtype</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mf">1.2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 1} int64</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2.7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: 2} int64</span>
</pre></div>
</div>
<p>Note in this example that the data type is <em>not</em> changed by subsequent
additions to the <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> when the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> keyword is specified.
To create an empty <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> with a specified type use, for example,
<code class="docutils literal notranslate"><span class="pre">BufferDict({},</span> <span class="pre">dtype=int)</span></code>. Any data type supported by <code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code>
arrays can be specified.</p>
<p>Some simple arithemetic is allowed between two <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a>s, say,
<code class="docutils literal notranslate"><span class="pre">g1</span></code> and <code class="docutils literal notranslate"><span class="pre">g2</span></code> provided they have the same keys and array shapes.
So, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="mf">20.</span><span class="p">,</span> <span class="mf">30.</span><span class="p">],</span> <span class="n">a</span><span class="o">=</span><span class="mf">10.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="go">    {&#39;a&#39;: 11.0, &#39;b&#39;: array([22., 33.])}</span>
</pre></div>
</div>
<p>Subtraction is also defined, as are multiplication and division
by scalars. The corresponding <code class="docutils literal notranslate"><span class="pre">+=</span></code>, <code class="docutils literal notranslate"><span class="pre">-=</span></code>, <code class="docutils literal notranslate"><span class="pre">*=</span></code>, <code class="docutils literal notranslate"><span class="pre">/=</span></code> operators
are supported, as are unary <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code>.</p>
<p>Finally a <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> can be cloned from another one using
a different buffer (containing different values):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">2.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">buf</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 10, &#39;b&#39;: 20}</span>
</pre></div>
</div>
<p>The  new buffer itself (i.e., not a copy) is used in the
new <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> if the buffer is a <code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code> array:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">2.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nbuf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">buf</span><span class="o">=</span><span class="n">nbuf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 11, &#39;b&#39;: 20}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">nbuf</span><span class="p">)</span>
<span class="go">[11 20]</span>
</pre></div>
</div>
<p>The main attributes are:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.BufferDict.size">
<span class="sig-name descname"><span class="pre">size</span></span><a class="headerlink" href="#gvar.BufferDict.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Size of buffer array.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.BufferDict.flat">
<span class="sig-name descname"><span class="pre">flat</span></span><a class="headerlink" href="#gvar.BufferDict.flat" title="Permalink to this definition">¶</a></dt>
<dd><p>Buffer array iterator.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.BufferDict.dtype">
<span class="sig-name descname"><span class="pre">dtype</span></span><a class="headerlink" href="#gvar.BufferDict.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Data type of buffer array elements.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.BufferDict.buf">
<span class="sig-name descname"><span class="pre">buf</span></span><a class="headerlink" href="#gvar.BufferDict.buf" title="Permalink to this definition">¶</a></dt>
<dd><p>The (1d) buffer array. Allows direct access to the buffer: for example,
<code class="docutils literal notranslate"><span class="pre">self.buf[i]</span> <span class="pre">=</span> <span class="pre">new_val</span></code> sets the value of the <code class="docutils literal notranslate"><span class="pre">i-th</span></code> element in
the buffer to value <code class="docutils literal notranslate"><span class="pre">new_val</span></code>.  Setting <code class="docutils literal notranslate"><span class="pre">self.buf</span> <span class="pre">=</span> <span class="pre">nbuf</span></code>
replaces the old buffer by new buffer <code class="docutils literal notranslate"><span class="pre">nbuf</span></code>. This only works if
<code class="docutils literal notranslate"><span class="pre">nbuf</span></code> is a one-dimensional <code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code> array having the same
length as the old buffer, since <code class="docutils literal notranslate"><span class="pre">nbuf</span></code> itself is used as the new
buffer (not a copy).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.BufferDict.shape">
<span class="sig-name descname"><span class="pre">shape</span></span><a class="headerlink" href="#gvar.BufferDict.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Always equal to <code class="docutils literal notranslate"><span class="pre">None</span></code>. This attribute is included since
<a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a>s share several attributes with <code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code> arrays to
simplify coding that might support either type. Being dictionaries
they do not have shapes in the sense of <code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code> arrays (hence
the shape is <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
</dd></dl>

<p>In addition to standard dictionary methods, the main methods here are:</p>
<dl class="py method">
<dt class="sig sig-object py" id="gvar.BufferDict.flatten">
<span class="sig-name descname"><span class="pre">flatten</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gvar.BufferDict.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy of buffer array.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.BufferDict.slice">
<span class="sig-name descname"><span class="pre">slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.BufferDict.slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Return slice/index in <code class="docutils literal notranslate"><span class="pre">self.flat</span></code> corresponding to key <code class="docutils literal notranslate"><span class="pre">k</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.BufferDict.slice_shape">
<span class="sig-name descname"><span class="pre">slice_shape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.BufferDict.slice_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Return tuple <code class="docutils literal notranslate"><span class="pre">(slice/index,</span> <span class="pre">shape)</span></code> corresponding to key <code class="docutils literal notranslate"><span class="pre">k</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.BufferDict.has_dictkey">
<span class="sig-name descname"><span class="pre">has_dictkey</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.BufferDict.has_dictkey" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if <code class="docutils literal notranslate"><span class="pre">self[k]</span></code> is defined; <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">k</span></code> may be a key or it may be related to a
related key associated with a non-Gaussian distribution
(e.g., <code class="docutils literal notranslate"><span class="pre">'log(k)'</span></code>; see <a class="reference internal" href="#gvar.BufferDict.add_distribution" title="gvar.BufferDict.add_distribution"><code class="xref py py-func docutils literal notranslate"><span class="pre">gvar.BufferDict.add_distribution()</span></code></a>
for more information).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.BufferDict.all_keys">
<span class="sig-name descname"><span class="pre">all_keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gvar.BufferDict.all_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterator over all keys and implicit keys.</p>
<p>For example, the following code</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">BufferDict</span><span class="p">()</span>
<span class="n">b</span><span class="p">[</span><span class="s1">&#39;log(x)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">b</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
<span class="nb">print</span><span class="p">()</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">b</span><span class="o">.</span><span class="n">all_keys</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</pre></div>
</div>
<p>gives the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="mi">1</span>

<span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="mi">1</span>
<span class="n">x</span> <span class="mf">2.718281828459045</span>
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">'x'</span></code> is not a key in dictionary <code class="docutils literal notranslate"><span class="pre">b</span></code>
but <code class="docutils literal notranslate"><span class="pre">b['x']</span></code> is defined implicitly from <code class="docutils literal notranslate"><span class="pre">b['log(x)']</span></code>.
See <a class="reference internal" href="#gvar.BufferDict.add_distribution" title="gvar.BufferDict.add_distribution"><code class="xref py py-meth docutils literal notranslate"><span class="pre">gvar.BufferDict.add_distribution()</span></code></a> for more
information.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.BufferDict.add_distribution">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invfcn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.BufferDict.add_distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new parameter distribution.</p>
<p><a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a>s can be used to represent a  restricted
class of  non-Gaussian distributions. For example, the code</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">gv</span><span class="o">.</span><span class="n">BufferDict</span><span class="o">.</span><span class="n">add_distribution</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">gv</span><span class="o">.</span><span class="n">exp</span><span class="p">)</span>
</pre></div>
</div>
<p>enables the use of log-normal distributions for parameters. So
defining, for example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">BufferDict</span><span class="p">()</span>
<span class="n">b</span><span class="p">[</span><span class="s1">&#39;log(a)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="s1">&#39;1(1)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>means that <code class="docutils literal notranslate"><span class="pre">b['a']</span></code> has a value (equal to <code class="docutils literal notranslate"><span class="pre">exp(b['log(a)']</span></code>)
even though <code class="docutils literal notranslate"><span class="pre">'a'</span></code> is not a key in the dictionary.</p>
<p>The distributions available by default correspond to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gv</span><span class="o">.</span><span class="n">BufferDict</span><span class="o">.</span><span class="n">add_distribution</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">gv</span><span class="o">.</span><span class="n">exp</span><span class="p">)</span>
<span class="n">gv</span><span class="o">.</span><span class="n">BufferDict</span><span class="o">.</span><span class="n">add_distribution</span><span class="p">(</span><span class="s1">&#39;sqrt&#39;</span><span class="p">,</span> <span class="n">gv</span><span class="o">.</span><span class="n">square</span><span class="p">)</span>
<span class="n">gv</span><span class="o">.</span><span class="n">BufferDict</span><span class="o">.</span><span class="n">add_distribution</span><span class="p">(</span><span class="s1">&#39;erfinv&#39;</span><span class="p">,</span> <span class="n">gv</span><span class="o">.</span><span class="n">erf</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Distributions’ function name. A <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is
raised if <code class="docutils literal notranslate"><span class="pre">name</span></code> is already being used for
a distribution; the error can be avoided by deleting
the old definition first using
<a class="reference internal" href="#gvar.BufferDict.del_distribution" title="gvar.BufferDict.del_distribution"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BufferDict.del_distribution()</span></code></a>.</p></li>
<li><p><strong>invfcn</strong> (<em>callable</em>) – Inverse of the transformation function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.BufferDict.del_distribution">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">del_distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.BufferDict.del_distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code></a> distribution <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p>
<p>Raises a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">name</span></code> is not the name of
an existing distribution.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.BufferDict.has_distribution">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.BufferDict.has_distribution" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if <code class="docutils literal notranslate"><span class="pre">name</span></code> has been defined as a distribution; <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.BufferDict.uniform">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">uniform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">umin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">umax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.BufferDict.uniform" title="Permalink to this definition">¶</a></dt>
<dd><p>Create uniform distribution on interval <code class="docutils literal notranslate"><span class="pre">[umin,</span> <span class="pre">umax]</span></code>.</p>
<p>The code</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gvar</span> <span class="k">as</span> <span class="nn">gv</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">BufferDict</span><span class="p">()</span>
<span class="n">b</span><span class="p">[</span><span class="s1">&#39;f(w)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">BufferDict</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">)</span>
</pre></div>
</div>
<p>adds a distribution function <code class="docutils literal notranslate"><span class="pre">f(w)</span></code> designed so that <code class="docutils literal notranslate"><span class="pre">b['w']</span></code>
corresponds to a uniform distribution on the interval <code class="docutils literal notranslate"><span class="pre">[2.,</span> <span class="pre">3.]</span></code>
(see <a class="reference internal" href="#gvar.BufferDict.add_distribution" title="gvar.BufferDict.add_distribution"><code class="xref py py-meth docutils literal notranslate"><span class="pre">gvar.BufferDict.add_distribution()</span></code></a> for more about
distributions).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – Name of function used in the <a class="reference internal" href="#gvar.BufferDict" title="gvar.BufferDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferDict</span></code></a> key.
Note that names can be reused provided they correspond to the
same interval as in previous calls.</p></li>
<li><p><strong>umin</strong> (<em>float</em>) – Minimum value of the uniform distribution.</p></li>
<li><p><strong>umax</strong> (<em>float</em>) – Maximum value of the uniform distribution.</p></li>
<li><p><strong>shape</strong> (<em>tuple</em>) – Shape of array of uniform variables. Default is <code class="docutils literal notranslate"><span class="pre">()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> object corresponding to a uniform distribution.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="gvar-svd-objects">
<h2><a class="reference internal" href="#gvar.SVD" title="gvar.SVD"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.SVD</span></code></a> Objects<a class="headerlink" href="#gvar-svd-objects" title="Permalink to this heading">¶</a></h2>
<p>SVD analysis is handled by the following class:</p>
<dl class="py class">
<dt class="sig sig-object py" id="gvar.SVD">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">SVD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">svdcut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">svdnum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compute_delta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rescale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.SVD" title="Permalink to this definition">¶</a></dt>
<dd><p>SVD decomposition of a pos. sym. matrix.</p>
<p><a class="reference internal" href="#gvar.SVD" title="gvar.SVD"><code class="xref py py-class docutils literal notranslate"><span class="pre">SVD</span></code></a> is a function-class that computes the eigenvalues and
eigenvectors of a symmetric matrix <code class="docutils literal notranslate"><span class="pre">mat</span></code>. Eigenvalues that
are small (or negative, because of roundoff) can be eliminated or
modified using <em>svd</em> cuts. Typical usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mat</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">.25</span><span class="p">],[</span><span class="mf">.25</span><span class="p">,</span><span class="mf">2.</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">SVD</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>             <span class="c1"># eigenvalues</span>
<span class="go">[ 0.94098301  2.05901699]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>          <span class="c1"># 1st eigenvector (for s.val[0])</span>
<span class="go">[ 0.97324899 -0.22975292]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>          <span class="c1"># 2nd eigenvector (for s.val[1])</span>
<span class="go">[ 0.22975292  0.97324899]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">SVD</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">svdcut</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>  <span class="c1"># force s.val[i]&gt;=s.val[-1]*0.6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>
<span class="go">[ 1.2354102   2.05901699]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>          <span class="c1"># eigenvector unchanged</span>
<span class="go">[ 0.97324899 -0.22975292]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">SVD</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">decomp</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>         <span class="c1"># decomposition of inverse of mat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">invmat</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">outer</span><span class="p">(</span><span class="n">wj</span><span class="p">,</span><span class="n">wj</span><span class="p">)</span> <span class="k">for</span> <span class="n">wj</span> <span class="ow">in</span> <span class="n">w</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">invmat</span><span class="p">))</span>    <span class="c1"># should be unit matrix</span>
<span class="go">[[  1.00000000e+00   2.77555756e-17]</span>
<span class="go"> [  1.66533454e-16   1.00000000e+00]]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mat</strong> – Positive, symmetric matrix.</p></li>
<li><p><strong>svdcut</strong> – If positive, replace eigenvalues of <code class="docutils literal notranslate"><span class="pre">mat</span></code> with
<code class="docutils literal notranslate"><span class="pre">svdcut*(max</span> <span class="pre">eigenvalue)</span></code>; if negative, discard
eigenmodes with eigenvalues smaller than <code class="docutils literal notranslate"><span class="pre">svdcut</span></code>
times the maximum eigenvalue.</p></li>
<li><p><strong>svdnum</strong> – If positive, keep only the modes with the largest
<code class="docutils literal notranslate"><span class="pre">svdnum</span></code> eigenvalues; ignore if set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>compute_delta</strong> (<em>bool</em>) – Compute <code class="docutils literal notranslate"><span class="pre">delta</span></code> (see below)
if <code class="docutils literal notranslate"><span class="pre">True</span></code>; set <code class="docutils literal notranslate"><span class="pre">delta=None</span></code> otherwise.</p></li>
<li><p><strong>rescale</strong> – Rescale the input matrix to make its diagonal
elements equal to +-1.0 before diagonalizing.</p></li>
</ul>
</dd>
</dl>
<p>The results are accessed using:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.SVD.val">
<span class="sig-name descname"><span class="pre">val</span></span><a class="headerlink" href="#gvar.SVD.val" title="Permalink to this definition">¶</a></dt>
<dd><p>An ordered array containing the eigenvalues of <code class="docutils literal notranslate"><span class="pre">mat</span></code>. Note
that <code class="docutils literal notranslate"><span class="pre">val[i]&lt;=val[i+1]</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.SVD.vec">
<span class="sig-name descname"><span class="pre">vec</span></span><a class="headerlink" href="#gvar.SVD.vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Eigenvectors <code class="docutils literal notranslate"><span class="pre">vec[i]</span></code> corresponding to the eigenvalues
<code class="docutils literal notranslate"><span class="pre">val[i]</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.SVD.valmin">
<span class="sig-name descname"><span class="pre">valmin</span></span><a class="headerlink" href="#gvar.SVD.valmin" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimum eigenvalue allowed in the modified matrix.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.SVD.valorig">
<span class="sig-name descname"><span class="pre">valorig</span></span><a class="headerlink" href="#gvar.SVD.valorig" title="Permalink to this definition">¶</a></dt>
<dd><p>Eigenvalues of original matrix.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.SVD.D">
<span class="sig-name descname"><span class="pre">D</span></span><a class="headerlink" href="#gvar.SVD.D" title="Permalink to this definition">¶</a></dt>
<dd><p>The diagonal matrix used to precondition the input matrix if
<code class="docutils literal notranslate"><span class="pre">rescale==True</span></code>. The matrix diagonalized is <code class="docutils literal notranslate"><span class="pre">D</span> <span class="pre">M</span> <span class="pre">D</span></code> where <code class="docutils literal notranslate"><span class="pre">M</span></code>
is the input matrix. <code class="docutils literal notranslate"><span class="pre">D</span></code> is stored as a one-dimensional vector of
diagonal elements. <code class="docutils literal notranslate"><span class="pre">D</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code> if <code class="docutils literal notranslate"><span class="pre">rescale==False</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.SVD.nmod">
<span class="sig-name descname"><span class="pre">nmod</span></span><a class="headerlink" href="#gvar.SVD.nmod" title="Permalink to this definition">¶</a></dt>
<dd><p>The first <code class="docutils literal notranslate"><span class="pre">nmod</span></code> eigenvalues in <code class="docutils literal notranslate"><span class="pre">self.val</span></code> were modified by
the SVD cut (equals 0 unless <code class="docutils literal notranslate"><span class="pre">svdcut</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.SVD.eigen_range">
<span class="sig-name descname"><span class="pre">eigen_range</span></span><a class="headerlink" href="#gvar.SVD.eigen_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Ratio of the smallest to the largest eigenvector in the
unconditioned matrix (after rescaling if <code class="docutils literal notranslate"><span class="pre">rescale=True</span></code>)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.SVD.delta">
<span class="sig-name descname"><span class="pre">delta</span></span><a class="headerlink" href="#gvar.SVD.delta" title="Permalink to this definition">¶</a></dt>
<dd><p>A vector of <code class="docutils literal notranslate"><span class="pre">gvar</span></code>s whose means are zero and whose
covariance matrix is what was added to <code class="docutils literal notranslate"><span class="pre">mat</span></code> to condition
its eigenvalues. Is <code class="docutils literal notranslate"><span class="pre">None</span></code> if <code class="docutils literal notranslate"><span class="pre">svdcut&lt;0</span></code> or
<code class="docutils literal notranslate"><span class="pre">compute_delta==False</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.SVD.decomp">
<span class="sig-name descname"><span class="pre">decomp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.SVD.decomp" title="Permalink to this definition">¶</a></dt>
<dd><p>Vector decomposition of input matrix raised to power <code class="docutils literal notranslate"><span class="pre">n</span></code>.</p>
<p>Computes vectors <code class="docutils literal notranslate"><span class="pre">w[i]</span></code> such that</p>
<blockquote>
<div><p>mat**n = sum_i numpy.outer(w[i],w[i])</p>
</div></blockquote>
<p>where <code class="docutils literal notranslate"><span class="pre">mat</span></code> is the original input matrix to <a class="reference internal" href="#gvar.svd" title="gvar.svd"><code class="xref py py-class docutils literal notranslate"><span class="pre">svd</span></code></a>. This
decomposition cannot be computed if the input matrix was rescaled
(<code class="docutils literal notranslate"><span class="pre">rescale=True</span></code>) except for <code class="docutils literal notranslate"><span class="pre">n=1</span></code> and <code class="docutils literal notranslate"><span class="pre">n=-1</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n</strong> (<em>number</em>) – Power of input matrix.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Array <code class="docutils literal notranslate"><span class="pre">w</span></code> of vectors.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="vegas-pdfintegrator-and-other-pdf-related-objects">
<h2><code class="xref py py-class docutils literal notranslate"><span class="pre">vegas.PDFIntegrator</span></code> and other PDF-related Objects<a class="headerlink" href="#vegas-pdfintegrator-and-other-pdf-related-objects" title="Permalink to this heading">¶</a></h2>
<p>Expectation values using probability density functions defined by
collections of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s can be evaluated using the <code class="xref py py-mod docutils literal notranslate"><span class="pre">vegas</span></code>
module (for multi-dimensional integration) and class
<code class="xref py py-class docutils literal notranslate"><span class="pre">vegas.PDFIntegrator</span></code>. Related classes are:</p>
<dl class="py class">
<dt class="sig sig-object py" id="gvar.PDF">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">PDF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">svdcut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-12</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.PDF" title="Permalink to this definition">¶</a></dt>
<dd><p>Probability density function (PDF) for <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>Given an array or dictionary <code class="docutils literal notranslate"><span class="pre">g</span></code> of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, <code class="docutils literal notranslate"><span class="pre">pdf=PDF(g)</span></code> is
the probability density function for the (usually correlated)
multi-dimensional Gaussian distribution defined by <code class="docutils literal notranslate"><span class="pre">g</span></code>. That is
<code class="docutils literal notranslate"><span class="pre">pdf(p)</span></code> is the probability density for random sample <code class="docutils literal notranslate"><span class="pre">p</span></code>
drawn from <code class="docutils literal notranslate"><span class="pre">g</span></code>. The logarithm of the PDF is obtained using
<code class="docutils literal notranslate"><span class="pre">pdf.logpdf(p)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or array of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s, or dictionary of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s
or arrays of <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s.</p></li>
<li><p><strong>svdcut</strong> (<em>non-negative float</em><em> or </em><em>None</em>) – If not <code class="docutils literal notranslate"><span class="pre">None</span></code>, replace
covariance matrix of <code class="docutils literal notranslate"><span class="pre">g</span></code> with a new matrix whose
small eigenvalues are modified: eigenvalues smaller than
<code class="docutils literal notranslate"><span class="pre">svdcut</span></code> times the maximum eigenvalue <code class="docutils literal notranslate"><span class="pre">eig_max</span></code> are
replaced by <code class="docutils literal notranslate"><span class="pre">svdcut*eig_max</span></code>. This can ameliorate
problems caused by roundoff errors when inverting the
covariance matrix. It increases the uncertainty associated
with the modified eigenvalues and so is conservative.
Setting <code class="docutils literal notranslate"><span class="pre">svdcut=None</span></code> or <code class="docutils literal notranslate"><span class="pre">svdcut=0</span></code> leaves the
covariance matrix unchanged. Default is <code class="docutils literal notranslate"><span class="pre">1e-12</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="gvar.PDFStatistics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">PDFStatistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">moments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">histogram</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.PDFStatistics" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute statistical information about a distribution.</p>
<p>Given moments <code class="docutils literal notranslate"><span class="pre">m[i]</span></code> of a random variable, computes
mean, standard deviation, skewness, and excess kurtosis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>moments</strong> (<em>array of floats</em>) – <code class="docutils literal notranslate"><span class="pre">moments[i]</span></code> is the (i+1)-th moment.
Optional argument unless <code class="docutils literal notranslate"><span class="pre">histgram=None</span></code>.</p></li>
<li><p><strong>histogram</strong> (<em>tuple</em>) – Tuple <code class="docutils literal notranslate"><span class="pre">(bins,prob)</span></code> where <code class="docutils literal notranslate"><span class="pre">prob[i]</span></code> is
the probability in the bin between <code class="docutils literal notranslate"><span class="pre">bins[i-1]</span></code> and <code class="docutils literal notranslate"><span class="pre">bins[i]</span></code>.
<code class="docutils literal notranslate"><span class="pre">prob[0]</span></code> is the probability below <code class="docutils literal notranslate"><span class="pre">bins[0]</span></code> and <code class="docutils literal notranslate"><span class="pre">prob[-1]</span></code>
is the probability above <code class="docutils literal notranslate"><span class="pre">bins[-1]</span></code>. Array <code class="docutils literal notranslate"><span class="pre">bins</span></code> is ordered.
The format for <code class="docutils literal notranslate"><span class="pre">prob</span></code> is what is returned by accumulating calls
to <a class="reference internal" href="#gvar.PDFHistogram.count" title="gvar.PDFHistogram.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">gvar.PDFHistogram.count()</span></code></a>. Optional argument unless
<code class="docutils literal notranslate"><span class="pre">moments=None</span></code>.</p></li>
</ul>
</dd>
</dl>
<p>The attributes are as follows:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFStatistics.mean">
<span class="sig-name descname"><span class="pre">mean</span></span><a class="headerlink" href="#gvar.PDFStatistics.mean" title="Permalink to this definition">¶</a></dt>
<dd><p>mean value</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFStatistics.sdev">
<span class="sig-name descname"><span class="pre">sdev</span></span><a class="headerlink" href="#gvar.PDFStatistics.sdev" title="Permalink to this definition">¶</a></dt>
<dd><p>standard deviation</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFStatistics.skew">
<span class="sig-name descname"><span class="pre">skew</span></span><a class="headerlink" href="#gvar.PDFStatistics.skew" title="Permalink to this definition">¶</a></dt>
<dd><p>skewness coefficient</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFStatistics.ex_kurt">
<span class="sig-name descname"><span class="pre">ex_kurt</span></span><a class="headerlink" href="#gvar.PDFStatistics.ex_kurt" title="Permalink to this definition">¶</a></dt>
<dd><p>excess kurtosis</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFStatistics.median">
<span class="sig-name descname"><span class="pre">median</span></span><a class="headerlink" href="#gvar.PDFStatistics.median" title="Permalink to this definition">¶</a></dt>
<dd><p>median (if <code class="docutils literal notranslate"><span class="pre">histogram</span></code> provided)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFStatistics.plus">
<span class="sig-name descname"><span class="pre">plus</span></span><a class="headerlink" href="#gvar.PDFStatistics.plus" title="Permalink to this definition">¶</a></dt>
<dd><p>interval <code class="docutils literal notranslate"><span class="pre">(median,</span> <span class="pre">median+plus)</span></code> contains 34.1% of probability</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFStatistics.minus">
<span class="sig-name descname"><span class="pre">minus</span></span><a class="headerlink" href="#gvar.PDFStatistics.minus" title="Permalink to this definition">¶</a></dt>
<dd><p>interval <code class="docutils literal notranslate"><span class="pre">(median-minus,</span> <span class="pre">median)</span></code> contains 34.1% of probability</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFStatistics.gvar">
<span class="sig-name descname"><span class="pre">gvar</span></span><a class="headerlink" href="#gvar.PDFStatistics.gvar" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">gvar.gvar(mean,</span> <span class="pre">sdev)</span></code></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="gvar.PDFHistogram">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gvar.</span></span><span class="sig-name descname"><span class="pre">PDFHistogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binwidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.PDFHistogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility class for creating PDF histograms.</p>
<p>This class is designed to facilitate studies of probability
density functions associated with <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a>s. The following code,
for example, makes a histogram of probabilities for the Gaussian
distribution corresponding to <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> 1.0(5):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">gvar</span><span class="p">(</span><span class="s1">&#39;1.0(5)&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">g</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)]</span>

<span class="n">hist</span> <span class="o">=</span> <span class="n">gv</span><span class="o">.</span><span class="n">PDFHistogram</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">count</span> <span class="o">=</span> <span class="n">hist</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">hist</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;probabilities:&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">prob</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;statistics:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">stats</span><span class="p">)</span>
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">hist</span></code> defines a histogram with 8 bins, centered on
<code class="docutils literal notranslate"><span class="pre">g.mean</span></code>, and each with width equal to <code class="docutils literal notranslate"><span class="pre">g.sdev</span></code>. The data in
array <code class="docutils literal notranslate"><span class="pre">data</span></code> is a random sampling from <code class="docutils literal notranslate"><span class="pre">g</span></code>’s distribution.
The number of data elements in each bin is determined by
<code class="docutils literal notranslate"><span class="pre">hist.count(data)</span></code> and turned into probabilities by
<code class="docutils literal notranslate"><span class="pre">hist.analyze(count)</span></code>. The probabilities (<code class="docutils literal notranslate"><span class="pre">a.prob</span></code>) and
a statistical analysis of the probability distribution based
on the histogram (<code class="docutils literal notranslate"><span class="pre">a.stats</span></code>) are then printed out:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">probabilities</span><span class="p">:</span> <span class="p">[</span> <span class="mf">0.0017</span>  <span class="mf">0.0213</span>  <span class="mf">0.1358</span>  <span class="mf">0.3401</span>  <span class="mf">0.3418</span>  <span class="mf">0.1351</span>  <span class="mf">0.0222</span>  <span class="mf">0.0018</span><span class="p">]</span>
<span class="n">statistics</span><span class="p">:</span>
      <span class="n">mean</span> <span class="o">=</span> <span class="mf">1.001</span>   <span class="n">sdev</span> <span class="o">=</span> <span class="mf">0.52334</span>   <span class="n">skew</span> <span class="o">=</span> <span class="mf">0.0069999</span>   <span class="n">ex_kurt</span> <span class="o">=</span> <span class="mf">0.034105</span>
   <span class="n">median</span> <span class="o">=</span> <span class="mf">1.00141666398</span>   <span class="n">plus</span> <span class="o">=</span> <span class="mf">0.499891542549</span>   <span class="n">minus</span> <span class="o">=</span> <span class="mf">0.501710986504</span>
</pre></div>
</div>
<p>A plot of the histogram can be created and displayed using,
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span> <span class="o">=</span> <span class="n">hist</span><span class="o">.</span><span class="n">make_plot</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;probabilities&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">vegas.PDFIntegrator</span></code> can be used to create histograms for more
complicated, multi-dimensional distributions: the expectation value of
<code class="docutils literal notranslate"><span class="pre">hist.count(f(p))</span></code> over values of <code class="docutils literal notranslate"><span class="pre">p</span></code> drawn from a multi-dimensional
distribution gives the the probability distribution for function <code class="docutils literal notranslate"><span class="pre">f(p)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> (<a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – The mean and standard deviation of <code class="docutils literal notranslate"><span class="pre">g</span></code> are
used to design the histogram bins, which are centered
on <code class="docutils literal notranslate"><span class="pre">g.mean</span></code>. Ignored if <code class="docutils literal notranslate"><span class="pre">None</span></code> (in which case <code class="docutils literal notranslate"><span class="pre">bins</span></code> must
be specified).</p></li>
<li><p><strong>nbin</strong> (<em>int</em>) – The number of histogram bins. Set equal to
<code class="docutils literal notranslate"><span class="pre">PDFHistogram.default_nbin</span></code> (=8 initially) if <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>binwidth</strong> (<em>float</em>) – The width of each bin is <code class="docutils literal notranslate"><span class="pre">binwidth</span> <span class="pre">*</span> <span class="pre">g.sdev</span></code>.
Set equal to <code class="docutils literal notranslate"><span class="pre">PDFHistogram.default_binwidth</span></code> (=1. initially)
if <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>bins</strong> (array or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Ignored if <code class="docutils literal notranslate"><span class="pre">None</span></code> (default). Otherwise specifies the
histogram’s bin edges, overriding the default bin design specified
by <code class="docutils literal notranslate"><span class="pre">g</span></code>. <code class="docutils literal notranslate"><span class="pre">len(bins)</span></code> is one larger than the number of bins. If
specified it overrides the default bin design indicated by <code class="docutils literal notranslate"><span class="pre">g</span></code>.
One of <code class="docutils literal notranslate"><span class="pre">g</span></code> or <code class="docutils literal notranslate"><span class="pre">bins</span></code> must be specified.</p></li>
</ul>
</dd>
</dl>
<p>The main attributes are:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFHistogram.g">
<span class="sig-name descname"><span class="pre">g</span></span><a class="headerlink" href="#gvar.PDFHistogram.g" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> used to design the histogram.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFHistogram.bins">
<span class="sig-name descname"><span class="pre">bins</span></span><a class="headerlink" href="#gvar.PDFHistogram.bins" title="Permalink to this definition">¶</a></dt>
<dd><p>Bin edges for the histogram (see above).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFHistogram.midpoints">
<span class="sig-name descname"><span class="pre">midpoints</span></span><a class="headerlink" href="#gvar.PDFHistogram.midpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Bin midpoints.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gvar.PDFHistogram.widths">
<span class="sig-name descname"><span class="pre">widths</span></span><a class="headerlink" href="#gvar.PDFHistogram.widths" title="Permalink to this definition">¶</a></dt>
<dd><p>Bin widths.</p>
</dd></dl>

<p>The main methods are:</p>
<dl class="py method">
<dt class="sig sig-object py" id="gvar.PDFHistogram.count">
<span class="sig-name descname"><span class="pre">count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.PDFHistogram.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute histogram of data.</p>
<p>Counts the number of elements from array <code class="docutils literal notranslate"><span class="pre">data</span></code> in each bin of the
histogram. Results are returned in an array, call it <code class="docutils literal notranslate"><span class="pre">h</span></code>, of
length <code class="docutils literal notranslate"><span class="pre">nbin+2</span></code> where <code class="docutils literal notranslate"><span class="pre">h[0]</span></code> is the number of data elements
that fall below the range of the histogram, <code class="docutils literal notranslate"><span class="pre">h[-1]</span></code>
(i.e., <code class="docutils literal notranslate"><span class="pre">h[nbin+1]</span></code>) is the number that fall above the range,
and <code class="docutils literal notranslate"><span class="pre">h[i]</span></code> is the number in the <code class="docutils literal notranslate"><span class="pre">i</span></code>-th bin for <code class="docutils literal notranslate"><span class="pre">i=1...nbin</span></code>.</p>
<p>Argument <code class="docutils literal notranslate"><span class="pre">data</span></code> can also be a float, in which case the result is the
same as from <code class="docutils literal notranslate"><span class="pre">histogram([data])</span></code>. Note that the expectation value of
<code class="docutils literal notranslate"><span class="pre">count(f(p))</span></code> over parameter values <code class="docutils literal notranslate"><span class="pre">p</span></code> drawn from a random
distribution gives the probabilities for values of <code class="docutils literal notranslate"><span class="pre">f(p)</span></code> to fall
in each histogram bin. Dividing  by the bin widths gives the average
probability density for random variable <code class="docutils literal notranslate"><span class="pre">f(p)</span></code> in each bin.</p>
<p>Bin intervals are closed on the left and open on the right,
except for the last interval which is closed on both ends.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.PDFHistogram.analyze">
<span class="sig-name descname"><span class="pre">analyze</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.PDFHistogram.analyze" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze count data from <a class="reference internal" href="#gvar.PDFHistogram.count" title="gvar.PDFHistogram.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PDFHistogram.count()</span></code></a>.</p>
<p>Turns an array of counts (see <a class="reference internal" href="#gvar.PDFHistogram.count" title="gvar.PDFHistogram.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PDFHistogram.count()</span></code></a>) into a
histogram of probabilities, and  estimates the mean, standard
deviation, and other statistical characteristics of the corresponding
probability distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>count</strong> (<em>array</em>) – Array of length <code class="docutils literal notranslate"><span class="pre">nbin+2</span></code> containing histogram
data where <code class="docutils literal notranslate"><span class="pre">count[0]</span></code> is the count for values that are
below the range of the histogram, <code class="docutils literal notranslate"><span class="pre">count[-1]</span></code> is the count
for values above the range, and <code class="docutils literal notranslate"><span class="pre">count[i]</span></code> is the count
for the <code class="docutils literal notranslate"><span class="pre">i</span></code>-th bin where <code class="docutils literal notranslate"><span class="pre">i=1...nbin</span></code>.</p>
</dd>
</dl>
<p>Returns a named tuple containing the following information (in order):</p>
<blockquote>
<div><p><em>bins</em>: Array of bin edges for histogram (length <code class="docutils literal notranslate"><span class="pre">nbin+1</span></code>)</p>
<p><em>prob</em>: Array of probabilities for each bin.</p>
<p><em>stats</em>: Statistical data about histogram. See <a class="reference internal" href="#gvar.PDFStatistics" title="gvar.PDFStatistics"><code class="xref py py-class docutils literal notranslate"><span class="pre">PDFStatistics</span></code></a>.</p>
<p><em>norm</em>: Convert counts into probabilities by dividing by <code class="docutils literal notranslate"><span class="pre">norm</span></code>.</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gvar.PDFHistogram.make_plot">
<span class="sig-name descname"><span class="pre">make_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plottype='probability'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar=dict(alpha=0.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color='b')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errorbar=dict(fmt='b.')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gaussian=dict(ls='--'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c='r')</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gvar.PDFHistogram.make_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert histogram counts in array <code class="docutils literal notranslate"><span class="pre">count</span></code> into a plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>count</strong> (<em>array</em>) – Array of histogram counts (see
<a class="reference internal" href="#gvar.PDFHistogram.count" title="gvar.PDFHistogram.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PDFHistogram.count()</span></code></a>).</p></li>
<li><p><strong>plot</strong> (<em>plotter</em>) – <code class="xref py py-mod docutils literal notranslate"><span class="pre">matplotlib</span></code> plotting window. If <code class="docutils literal notranslate"><span class="pre">None</span></code>
uses the default window. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>show</strong> (<em>boolean</em>) – Displayes plot if <code class="docutils literal notranslate"><span class="pre">True</span></code>; otherwise returns
the plot. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>plottype</strong> (<em>str</em>) – The probabilities in each bin are plotted if
<code class="docutils literal notranslate"><span class="pre">plottype='probability'</span></code> (default). The average probability
density is plot if <code class="docutils literal notranslate"><span class="pre">plottype='density'</span></code>. The
cumulative probability is plotted if <code class="docutils literal notranslate"><span class="pre">plottype=cumulative</span></code>.</p></li>
<li><p><strong>bar</strong> (<em>dictionary</em>) – Additional plotting arguments for the bar graph
showing the histogram. This part of the plot is omitted
if <code class="docutils literal notranslate"><span class="pre">bar=None</span></code>.</p></li>
<li><p><strong>errorbar</strong> (<em>dictionary</em>) – Additional plotting arguments for the
errorbar graph, showing error bars on the histogram. This
part of the plot is omitted if <code class="docutils literal notranslate"><span class="pre">errorbar=None</span></code>.</p></li>
<li><p><strong>gaussian</strong> (<em>dictionary</em>) – Additional plotting arguments for the
plot of the Gaussian probability for the <a class="reference internal" href="#gvar.GVar" title="gvar.GVar"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code></a> (<code class="docutils literal notranslate"><span class="pre">g</span></code>)
specified in the initialization. This part of the plot
is omitted if <code class="docutils literal notranslate"><span class="pre">gaussian=None</span></code> or if no <code class="docutils literal notranslate"><span class="pre">g</span></code> was
specified.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">¶</a></h2>
<p><a class="reference internal" href="#module-gvar" title="gvar: Correlated Gaussian random variables."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar</span></code></a> makes heavy use of <code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code> for array manipulations. It
also uses the <code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code> code for implementing elementary functions
(<em>e.g.</em>, <code class="docutils literal notranslate"><span class="pre">sin</span></code>, <code class="docutils literal notranslate"><span class="pre">exp</span></code> …) in terms of member functions.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar</span></code> - Gaussian Random Variables</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#gvar-gvar-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.GVar</span></code> Objects</a></li>
<li><a class="reference internal" href="#gvar-bufferdict-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.BufferDict</span></code> Objects</a></li>
<li><a class="reference internal" href="#gvar-svd-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">gvar.SVD</span></code> Objects</a></li>
<li><a class="reference internal" href="#vegas-pdfintegrator-and-other-pdf-related-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">vegas.PDFIntegrator</span></code> and other PDF-related Objects</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="overview.html"
                          title="previous chapter">Overview and Tutorial</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="gvar_dataset.html"
                          title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar.dataset</span></code> - Random Data Sets</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/gvar.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="gvar_dataset.html" title="gvar.dataset - Random Data Sets"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview and Tutorial"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">gvar 12.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">gvar</span></code> - Gaussian Random Variables</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2023, G. P. Lepage.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.2.
    </div>
  </body>
</html>